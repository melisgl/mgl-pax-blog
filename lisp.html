<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>lisp</title>
<link type='text/css' href='style.css' rel='stylesheet'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
<script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
   <!-- Google tag (gtag.js) -->
<script async src='https://www.googletagmanager.com/gtag/js?id=G-7X64Q1D73F'></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7X64Q1D73F');
</script>
<script src='grid.js'></script>
<link rel='shortcut icon' type='image/png' href='favicon.png'>
<link rel='preconnect' href='https://fonts.googleapis.com'>
<link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>
<link href='https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap' rel='stylesheet'>
<style> @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap'); </style>
<link rel='alternate' href='http://quotenil.com/blog.rss' type='application/rss+xml'/>
<link rel='alternate' href='http://quotenil.com/lisp.rss' type='application/rss+xml'/>
</head>
<body>
<div id="content-container">
<div id=toc>
 <div id=home>
  <a href=blog.html><code>(QUOTE NIL)</code></a>
 </div>
 <div id=links>
  Ramblings on <a href=ai.html>ai</a>, <a href=lisp.html><span class=current-category>lisp</span></a>
  , <a href=tech.html>tech</a> and <a href=personal.html>personal</a> topics by <a
  href=about-me.html>me</a>.
 </div>
</div><div id="content">
<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40UNTANGLING-LITERATE-PROGRAMMING-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@UNTANGLING-LITERATE-PROGRAMMING-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="untangling-literate-programming.html" title="Untangling Literate Programming">Untangling Literate Programming</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>, <code>pompousness</code>,&nbsp; <em>Date:</em> 2026-02-02</span></p>

<div class='br'></div>

<h2>Classical literate programming</h2>

<p>A <a href="https://en.wikipedia.org/wiki/Literate_programming" >literate program</a> consists of interspersed narrative and
code chunks. From this, source code to be fed to the compiler is
generated by a process called <em>tangling</em>, and documentation by
<em>weaving</em>. The specifics of tangling vary, but the important point
is that this puts the human narrative first and allows complete
reordering and textual combination of chunks at the cost of
introducing an additional step into the write-compile-run cycle.</p>

<h2>The general idea</h2>

<p>It is easy to mistake this classical implementation of literate
programming for the more general idea that we want to</p>

<ol>
<li><p>present code to human readers in pedagogical order with narrative
   added, and</p></li>
<li><p>make changing code and its documentation together easy.</p></li>
</ol>

<p>The <a href="https://en.wikipedia.org/wiki/Literate_programming#Advantages" >advantages</a> of literate programming follow from
these desiderata.</p>

<h2>Untangled LP</h2>

<p>In many languages today, code order is far more flexible than in the
era of early literate programming, so the narrative order can be
approximated to some degree using docstrings and comments. Code and
its documentation are side by side, so changing them together should
also be easy. Since the normal source code now acts as the LP
source, there is no more tangling in the programming loop. This is
explored in more detail <a href="https://www.linestarve.com/blog/post/literate-programming-untangled/" >here</a>.</p>

<h2>Pros and cons</h2>

<p>Having no tangling is a great benefit, as we get to keep our usual
programming environment and tooling. On the other hand, bare-bones
untangled LP suffers from the following potential problems.</p>

<ol>
<li><p><em>Order mismatches</em>: Things like inline functions and global
   variables may need to be defined before use. So, code order tends
   to deviate from narrative order to some degree.</p></li>
<li><p><em>Reduced locality</em>: Our main tool to sync code and narrative is
   factoring out small, meaningful functions, which is just good
   programming style anyway. However, this may be undesirable for
   reasons of performance or readability. In such a case, we might
   end up with a larger function. Now, if we have only a single
   docstring for it, then it can be non-obvious which part of the
   code a sentence in the docstring refers to because of their
   distance and the presence of other parts.</p></li>
<li><p><em>No source code only view</em>: Sometimes we want to see only the
   code. In classical LP, we can look at the tangled file. In
   untangled LP, editor support for hiding the narrative is the
   obvious solution.</p></li>
<li><p><em>No generated documentation</em>: There is no more tangling nor
   weaving, but we still need another tool to generate
   documentation. Crucially, generating documentation is not in the
   main programming loop.</p></li>
</ol>

<p>In general, whether classical or untangled LP is better depends on
the severity of the above issues in the particular programming
environment.</p>

<h2>The Lisp and PAX view</h2>

<p><a href="https://github.com/melisgl/mgl-pax" >MGL-PAX</a>, a Common Lisp untangled LP solution, aims to
minimize the above problems and fill in the gaps left by dropping
tangling.</p>

<ol>
<li><p><em>Order</em></p>

<ul>
<li><p>Common Lisp is quite relaxed about the order of function
   definitions, but not so much about <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defmac.htm" title="DEFMACRO (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFMACRO</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpar.htm" title="DEFVAR (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFVAR</code></a>,
   <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpar.htm" title="DEFPARAMETER (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFPARAMETER</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcon.htm" title="DEFCONSTANT (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFCONSTANT</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_deftp.htm" title="DEFTYPE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFTYPE</code></a> , <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defcla.htm" title="DEFCLASS (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFCLASS</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defstr.htm" title="DEFSTRUCT (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFSTRUCT</code></a>,
   <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_define.htm" title="DEFINE-COMPILER-MACRO (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFINE-COMPILER-MACRO</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_set_ma.htm" title="SET-MACRO-CHARACTER (MGL-PAX:CLHS FUNCTION)"><code>SET-MACRO-CHARACTER</code></a>,
   <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_set__1.htm" title="SET-DISPATCH-MACRO-CHARACTER (MGL-PAX:CLHS FUNCTION)"><code>SET-DISPATCH-MACRO-CHARACTER</code></a>, <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_defpkg.htm" title="DEFPACKAGE (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DEFPACKAGE</code></a>. However, code order
   can for the most part follow narrative order. In practice, we
   end up with some <code>DEFVAR</code>s far from their parent
   <code>DEFSECTION</code>s (but <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_declai.htm" title="DECLAIM (MGL-PAX:CLHS MGL-PAX:MACRO)"><code>DECLAIM</code></a> <a href="http://www.lispworks.com/documentation/HyperSpec/Body/d_specia.htm" title="SPECIAL (MGL-PAX:CLHS DECLARATION)"><code>SPECIAL</code></a> helps).</p></li>
<li><p><a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:@INTRODUCTION%20MGL-PAX:SECTION" ><code>DEFSECTION</code></a> controls documentation order. The
   references to Lisp definitions in <code>DEFSECTION</code> determine
   narrative order independently from the code order. This
   allows the few ordering problems to be patched over in the
   generated documentation.</p></li>
<li><p>Furthermore, because <code>DEFSECTION</code> can handle the exporting of
   symbols, we can declare the public interface piecemeal, right
   next to the relevant definitions, rather than in a monolithic
   <code>DEFPACKAGE</code></p></li>
</ul></li>
<li><p><em>Locality</em></p>

<ul>
<li><p>Lisp macros replace chunks in the rare, complex cases where a
   chunk is not a straightforward text substitution but takes
   parameters. Unlike text-based LP chunks, macros must operate
   on valid syntax trees (S-expressions), so they cannot be used
   to inject arbitrary text fragments (e.g. an unclosed
   parenthesis).</p>

<p>This constraint forces us to organize code into meaningful,
 syntactic units rather than arbitrary textual fragments,
 which results in more robust code. Within these units,
 macros allow us to reshape the syntax tree directly,
 handling scoping properly where text interpolation would
 fail.</p></li>
<li><p>PAX's <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:NOTE%20MGL-PAX:MACRO" ><code>NOTE</code></a> is an extractable, named comment. <code>NOTE</code>
   can interleave with code within e.g. functions to minimize
   the distance between the logic and its documentation.</p></li>
<li><p>Also, PAX hooks into the development to provide easy
   navigation in the documentation tree.</p></li>
</ul></li>
<li><p><em>Source code only view:</em> PAX supports <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:@EMACS-FUNCTIONALITY%20MGL-PAX:SECTION" >hiding</a>
   verbose documentation (sections, docstrings, comments) in the
   editor.</p></li>
<li><p><em>Generating documentation</em></p>

<ul>
<li><p>PAX extracts docstrings, <code>NOTE</code>s and combines them with
   narrative glue in <code>DEFSECTION</code>s.</p></li>
<li><p>Documentation can be <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:@GENERATING-DOCUMENTATION%20MGL-PAX:SECTION" >generated</a> as static
   HTML/PDF files for offline reading or <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" >browsed
   live</a> (in an Emacs buffer or via an in-built web
   server) during development.</p></li>
<li><p>LaTeX math is supported in both PDF and HTML (via
   <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#MGL-PAX:@MATHJAX%20MGL-PAX:SECTION" >MathJax</a>, whether live or offline).</p></li>
</ul></li>
</ol>

<p>In summary, PAX accepts a minimal deviation in code/narrative order
but retains the original, interactive Lisp environment (e.g.
<a href="https://github.com/slime/slime" >SLIME</a>/<a href="https://github.com/joaotavora/sly" >Sly</a>), through which it offers optional
convenience features like extended navigation, live browsing, and
hiding documentation in code. In return, we give up easy
fine-grained control over typesetting the documentation — a price
well worth paying in Common Lisp.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40PAX-PDF-OUTPUT-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@PAX-PDF-OUTPUT-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-pdf-output.html" title="PAX PDF Output">PAX PDF Output</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2025-05-15</span></p>

<div class='br'></div>

<p>Thanks to <a href="https://github.com/paulapatience" >Paul A. Patience</a>,
<a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a> now has <a href="https://github.com/melisgl/mgl-pax#x-28MGL-PAX-3A-40PDF-OUTPUT-20MGL-PAX-3ASECTION-29" >PDF support</a>. See
<a href="http://quotenil.com/blog-files/pax-manual-v0.4.1.pdf" >pax-manual-v0.4.1.pdf</a> and
<a href="http://quotenil.com/blog-files/dref-manual-v0.4.1.pdf" >dref-manual-v0.4.1.pdf</a>. The PDF is very similar
to the <a href="https://melisgl.github.io/mgl-pax-world/" >HTML</a>, even down to the locative types (e.g
<code>[function]</code>) being linked to the sources on GitHub, but
cross-linking between PDFs doesn't work reliably on most viewers, so
that's disabled. Also, for reading PDFs so heavy on internal linking
to be enjoyable, one needs a viewer that supports going back within
the PDF (not the case with Chrome at the moment). Here is a blurry
screenshot to entice:</p>

<p><img src="blog-files/pax-pdf-doc.png" alt="pax-pdf-doc" /></p>

<p>There is a bit of a Christmas tree effect due to syntax highlighting
and the colouring of the links. Blue links are internal to the PDF,
<a href="https://en.wikipedia.org/wiki/Maroon" >maroon</a> links are external. I
might want to change that to make it look more like the HTML, but I
have not found a way on LaTeX to underline text without breaking
automatic hyphenation.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40ADAPTIVE-HASHING-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@ADAPTIVE-HASHING-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="adaptive-hashing.html" title="Adaptive Hashing">Adaptive Hashing</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2025-05-02</span></p>

<div class='br'></div>

<p>At the <a href="https://www.european-lisp-symposium.org/2024/" >2024 ELS</a>,
I gave a <a href="https://quotenil.com/adaptive-hash-talk.pdf" >talk on adaptive
hashing</a>, which
focusses on making general purpose hash tables <em>faster and more
robust</em> at the same time.</p>

<h2>Theory vs Practice</h2>

<p>Hash table theory most concerns itself with the asymptotic
worst-case cost with a hash function chosen randomly from a family
of hash functions. Although these results are very relevant in
practice,</p>

<ul>
<li><p>those pesky constant factors, that the big-O cost ignores, do
  matter, and</p></li>
<li><p>we don't pick hash functions randomly but fix the hash function
  for the lifetime of the hash table.</p></li>
</ul>

<p>There are <a href="https://en.wikipedia.org/wiki/Perfect_hash_function" >Perfect
Hashing</a>
algorithms, that choose an optimal hash function for a given set of
keys. The drawback is that they either require the set of keys to be
fixed or they are too slow to be used as general purpose hash
tables.</p>

<p>Still, the idea that we can do better by adapting the hash function
to the actual keys is key. Can we do that <em>online</em>, that is, while
the hash table is being used? Potential performance gains come from
improving the constant factors mentioned above by</p>

<ul>
<li><p>having fewer collisions, and</p>

<p><img src="blog-files/cache-friendliness-regret.png" alt="cache-friendliness-regret" /></p></li>
<li><p>being more cache-friendly.</p>

<p><img src="blog-files/cache-friendliness-put.png" alt="cache-friendliness-put" /></p></li>
</ul>

<p>The first image above plots the regret (the expected number of
comparisons of per lookup minus the minimum achievable) and the
measured run-time of PUT operations vs the number of keys in the
hash table with a particular key distribution. Green is Murmur (a
robust hash function), Blue is SBCL's expedient <code>EQ</code>
hash. The wiggling of the graphs is due to the resizing of the hash
table as keys are added to it.</p>

<p>Note how SBCL's regret starts out much lower and becomes much higher
than that of Murmur, but if anything, its advantage in run
time (second image) grows.</p>

<h2>Implementation</h2>

<p>The general idea is sound, but turning it into real performance
gains is hard due to the cost of choosing a hash function and
switching to it. First, we have to make some assumption about the
distribution of keys. In fact, default hash functions in language
runtimes often make such assumptions to make the common cases
faster, usually at the cost of weakened worst-case guarantees.</p>

<p>The rest of this post is about how SBCL's built-in hash tables,
which had been reasonably fast, were modified. The core switching
mechanism looks at</p>

<ul>
<li><p>the length of the collision chain on PUT operations,</p></li>
<li><p>the collision count on rehash (when the hash table is grown), and</p></li>
<li><p>the size of the hash table.</p></li>
</ul>

<h3>Adapting <code>EQ</code> hash tables</h3>

<ol>
<li><p>Init to to constant hash function. This a fancy way of saying
   that we do linear search in a vector internally. This is an <code>EQ</code>
   hash table, so key comparison is as single assembly instruction.</p></li>
<li><p>When the hash table is grown to more than 32 keys and it must be
   rehashed anyway, we switch to a hash function that does a single
   right shift with the number of bits to shift determined from the
   longest common run of low-bits in the keys.</p></li>
<li><p>If too many collisions, we switch to the previous default SBCL
   <code>EQ</code>-hash function that has been tuned for a long time.</p></li>
<li><p>If too many collisions, we switch to Murmur, a general purpose
   hash. We could also go all the way to cryptographic hashes.</p></li>
</ol>

<p>In step 2, the hash function with the single shift fits the memory
allocator's behaviour nicely: it is a perfect hash for keys forming
arithmetic sequences, which is often approximately true for objects
of the same type allocated in a loop.</p>

<p><img src="blog-files/adaptive-hash-eq-put.png" alt="adaptive-hash-eq-put" /></p>

<p>In this figure, the red line is the adaptive hash.</p>

<h3>Adapting <code>EQUAL</code> hash tables</h3>

<p>For composite keys, running the hash function is the main cost.
Adaptive hashing does the following.</p>

<ul>
<li><p>For string keys, hash only the first and last 2 characters.</p></li>
<li><p>For list keys, only hash the first 4 elements.</p></li>
<li><p>If too many collisions, double the limit.</p></li>
</ul>

<p><img src="blog-files/adaptive-hash-string-put.png" alt="adaptive-hash-string-put" /></p>

<p><br>
So, SBCL hash tables have been adaptive for almost a year now,
gaining some speed in common cases, and robustness in others.</p>

<p>The full paper is <a href="https://zenodo.org/records/11091296" >here</a>.</p>

<p><img src="blog-files/adaptive-hash.png" alt="adaptive-hashing" /></p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40PAX-V0-2E4-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@PAX-V0.4-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-v0.4.html" title="PAX and DRef v0.4">PAX and DRef v0.4</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2025-04-23</span></p>

<div class='br'></div>

<p>Version 0.4 of <a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a>, the documentation system, and <a href="https://github.com/melisgl/mgl-pax/tree/master/dref/" title="DRef">DRef</a>, the
definition reifier, was released. There were large refactorings, bug
fixes, minor features, cosmetics, documentation and performance
improvements <a href="https://github.com/melisgl/mgl-pax/commits/parse-word" >too numerous to
list</a>.</p>

<p>... read the rest of <a href="pax-v0.4.html" title="PAX and DRef v0.4">PAX and DRef v0.4</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40MULTIFACETED-DEVELOPMENT-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@MULTIFACETED-DEVELOPMENT-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="multifaceted-development.html" title="On Multifaceted Development and the Role of Documentation">On Multifaceted Development and the Role of Documentation</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>, <code>pompousness</code>,&nbsp; <em>Date:</em> 2023-08-17</span></p>

<div class='br'></div>

<p>Catchy title, innit? I came up with it while trying to
name the development style <a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a> enables. The original idea was
something vaguely self-explanatory in a straight out of a marketing
department kind of way, with tendrils right into your unconscious.
Documentation-driven development sounded just the thing, but it's
already taken. Luckily, I came to realize that neither documentation
nor any other single thing should drive development. Less luckily
for the philosophically disinclined, this epiphany unleashed my
inner <a href="https://en.wikipedia.org/wiki/Richard_P._Gabriel" >Richard P.
Gabriel</a>. I reckon
if there is a point to what follows, it's abstract enough to make it
hard to tell.</p>

<p>... read the rest of <a href="multifaceted-development.html" title="On Multifaceted Development and the Role of Documentation">On Multifaceted Development and the Role of Documentation</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40TRY-IN-EMACS-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@TRY-IN-EMACS-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="try-in-emacs.html" title="Try in Emacs">Try in Emacs</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2023-08-14</span></p>

<div class='br'></div>

<p><a href="https://github.com/melisgl/try" >Try</a>, my test anti-framework,
has just got light Emacs integration.</p>

<p>... read the rest of <a href="try-in-emacs.html" title="Try in Emacs">Try in Emacs</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40DREF-AND-PAX-V0-2E3-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@DREF-AND-PAX-V0.3-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="dref-and-pax-v0.3.html" title="DRef and PAX v0.3">DRef and PAX v0.3</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2023-07-26</span></p>

<div class='br'></div>

<p><code>DEFSECTION</code> needs to refer to definitions that do not create a
first-class object (e.g. stuff like <code>(*DOCUMENT-LINK-TO-HYPERSPEC*
VARIABLE)</code>), and since its original release in 2014, a substantial
part of <a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a> dealt with locatives and references, which reify
definitions. This release finally factors that code out into a
library called <a href="https://github.com/melisgl/mgl-pax/tree/master/dref/" title="DRef">DRef</a>, allowing PAX to focus on documentation. Being
very young, DRef lives under adult supervision, in a
<a href="https://github.com/melisgl/mgl-pax/tree/master/dref" >subdirectory</a>
of the PAX repository.</p>

<p>... read the rest of <a href="dref-and-pax-v0.3.html" title="DRef and PAX v0.3">DRef and PAX v0.3</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40PAX-BROWSER-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@PAX-BROWSER-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-browser.html" title="PAX Live Documentation Browser">PAX Live Documentation Browser</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2023-06-10</span></p>

<div class='br'></div>

<p>PAX got a <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" >live documentation
browser</a> to make documentation generation a
more interactive experience. A great thing about Lisp development is
changing a single function and quickly seeing how it behaves without
the delay of a full recompile. Previously, editing a docstring
required regenerating the full documentation to see how the changes
turned out. The live documentation browser does away with this step,
which tightens the edit/document loop.</p>

<p>PAX also got an <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:@APROPOS%20MGL-PAX:SECTION" >apropos browser</a>. It could always
generate documentation for stuff not written with PAX in mind, so
with the live browser already implemented, this was a just a small
add-on.</p>

<p>The trouble with interactivity is, of course, that it's difficult to
get the point across in text, so I made two short videos that
demonstrate the basics.</p>

<ul>
<li><p><a href="https://youtu.be/vH9hpk_Yirw" >Live browsing with w3m</a></p></li>
<li><p><a href="https://youtu.be/ilPRgwKZkeo" >Live browsing with other browsers</a></p></li>
</ul>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40THERE-IS-TRY-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@THERE-IS-TRY-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="there-is-try.html" title="There is Try">There is Try</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2022-10-16</span></p>

<div class='br'></div>

<p>Do or do not. There is now Try. I forgot to announce
<a href="https://github.com/melisgl/try" >Try</a>, my Common Lisp test
framework, on this blog.</p>

<ul>
<li><p>Try does equally well in interactive and non-interactive mode by
  minimizing the function-test impedance mismatch.</p></li>
<li><p>It provides a single, extensible <a href="https://github.com/melisgl/try#x-28TRY-3A-40TRY-2FIS-20MGL-PAX-3ASECTION-29" >check
  macro</a>.
  All other checks are built on top of it.</p></li>
<li><p>It is highly customizable: what to debug interactively, what to
  print, what to describe in detail, what to rerun, what to count
  can all be easily changed.</p></li>
<li><p>Customization is based on complex types built from <a href="https://github.com/melisgl/try#x-28TRY-3A-40TRY-2FEVENTS-20MGL-PAX-3ASECTION-29" >event
  types</a>,
  which are signalled when checks or tests are run.</p></li>
</ul>

<p>... read the rest of <a href="there-is-try.html" title="There is Try">There is Try</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40PAX-V0-2E1-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@PAX-V0.1-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-v0.1.html" title="PAX v0.1">PAX v0.1</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2022-02-16</span></p>

<div class='br'></div>

<p><a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a> v0.1 is released. At this point, I consider it fairly
complete. Here is the changelog for the last year or so.</p>

<h2>New Features</h2>

<ul>
<li><p>To reduce deployment size, made the MGL-PAX system <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28-22mgl-pax-22-20ASDF-2FSYSTEM-3ASYSTEM-29" >autoload navigation, documentation generation, and transcription code</a>.</p></li>
<li><p>Symbols in the CL package are <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28MGL-PAX-3A-2ADOCUMENT-LINK-TO-HYPERSPEC-2A-20VARIABLE-29" >linked to the hyperspec</a> like this: <code>PRINT</code>, which renders as <a href="http://www.lispworks.com/documentation/HyperSpec/Body/f_wr_pr.htm" title="PRINT (MGL-PAX:CLHS FUNCTION)"><code>PRINT</code></a>.</p></li>
<li><p>Hyperspec sections and issues can be linked to with the <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28MGL-PAX-3ACLHS-20MGL-PAX-3ALOCATIVE-29" ><code>CLHS</code> locative</a> like this: <code>[lambda lists][CLHS]</code>, which renders as <a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_d.htm" title="&quot;3.4&quot; (MGL-PAX:CLHS MGL-PAX:SECTION)">lambda lists</a>.</p></li>
<li><p>Added support for <code>[see this][foo function]</code> and <code>[see this][foo]</code> style of <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28MGL-PAX-3A-40MGL-PAX-LINKING-TO-CODE-20MGL-PAX-3ASECTION-29" >linking</a>.</p></li>
<li><p>Added <a href="https://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28DECLARATION-20MGL-PAX-3ALOCATIVE-29" ><code>DECLARATION</code> locative</a>.</p></li>
</ul>

<p>... read the rest of <a href="pax-v0.1.html" title="PAX v0.1">PAX v0.1</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40JOURNAL-THE-KITCHEN-SINK-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@JOURNAL-THE-KITCHEN-SINK-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="journal-the-kitchen-sink.html" title="Journal, the Kitchen Sink">Journal, the Kitchen Sink</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2020-09-04</span></p>

<div class='br'></div>

<p>Ever wished for machine-readable logs and <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_tracec.htm" ><code>TRACE</code></a>s, maybe
for writing tests or something more fancy? The
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40JOURNAL-BACKGROUND-20MGL-PAX-3ASECTION-29" >Journal</a> library takes a simple idea:
user-defined execution traces and implements
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40LOGGING-20MGL-PAX-3ASECTION-29" >logging</a>, <a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40TRACING-20MGL-PAX-3ASECTION-29" >tracing</a>, a
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40TESTING-20MGL-PAX-3ASECTION-29" >testing</a> &quot;framework&quot; with <a href="https://en.wikipedia.org/wiki/Mock_object" >mock</a>
support, and an <a href="https://martinfowler.com/eaaDev/EventSourcing.html" >Event Sourcing</a> style
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40PERSISTENCE-20MGL-PAX-3ASECTION-29" >database</a> on top.</p>

<p>... read the rest of <a href="journal-the-kitchen-sink.html" title="Journal, the Kitchen Sink">Journal, the Kitchen Sink</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40MOVING-THE-BLOG-TO-PAX-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@MOVING-THE-BLOG-TO-PAX-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="moving-the-blog-to-pax.html" title="Moving the Blog to PAX">Moving the Blog to PAX</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2020-05-05</span></p>

<div class='br'></div>

<p>After more than five years of silence, I may be resurrecting <a href="https://web.archive.org/web/20190814015233/http://quotenil.com/" >my old
blog</a>.
I already got as far as rewriting it using
<a href="http://melisgl.github.io/mgl-pax/" >MGL-PAX</a>, which is a curious
choice because PAX is a documentation generator for Common Lisp. The
blog &quot;engine&quot; is rather bare-bones but works admirably, especially
considering that the implementation is only 72 lines of code, most
of which deals with post categories and overview pages with
shortened posts, something PAX hasn't seen the need for.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="on-the-design-of-matrix-libraries.html" title="On the Design of Matrix Libraries">On the Design of Matrix Libraries</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="ai.html" title="ai"><code>ai</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2015-02-26</span></p>

<div class='br'></div>

<p><strong>2020-05-03</strong> – Things have changed the during last 5
years. This is a non-issue in Tensorflow and possibly in other
frameworks, as well.</p>

<p>I believe there is one design decision in
<a href="http://melisgl.github.io/mgl-pax-world/mat-manual.html" >MGL-MAT</a>
that has far reaching consequences: to make a single matrix object
capable of storing multiple representations of the same data and let
operations decide which representation to use based on what's the
most convenient or efficient, without having to even know about all
the possible representations.</p>

<p>... read the rest of <a href="on-the-design-of-matrix-libraries.html" title="On the Design of Matrix Libraries">On the Design of Matrix Libraries</a>.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40BIGGER-AND-BADDER-PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@BIGGER-AND-BADDER-PAX-WORLD-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="bigger-and-badder-pax-world.html" title="Bigger and Badder PAX World">Bigger and Badder PAX World</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2015-02-20</span></p>

<div class='br'></div>

<p>Bigger because documentation for
<a href="http://melisgl.github.io/mgl-pax-world/named-readtables-manual.html" >named-readtables</a>
and
<a href="http://melisgl.github.io/mgl-pax-world/micmac-manual.html" >micmac</a>
has been added. Badder because clicking on a name will produce a
permalink such as this:
<a href="http://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28MGL-PAX-3A-2ADOCUMENT-MARK-UP-SIGNATURES-2A-20-28VARIABLE-29-29" ><code>*DOCUMENT-MARK-UP-SIGNATURES*</code></a>.
Clicking on locative types such as <code>[variable]</code> on the page that has
just been linked to will take you to the file and line on github
where <code>*DOCUMENT-MARK-UP-SIGNATURES*</code> is defined.</p>

<p><a id="x-28MGL-PAX-BLOG-3A-40LISP--40PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@LISP-@PAX-WORLD-SHORT%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-world.html" title="PAX World">PAX World</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2015-01-26</span></p>

<div class='br'></div>

<p>A promise of <a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a> has always been that it will be easy to
generate documentation for different libraries without requiring
extensive markup and relying on stable URLs. For example, without
PAX, if a docstring in the MGL library referenced the matrix class
<code>MGL-MAT:MAT</code> from the MGL-MAT library, it would need to include
ugly HTML links in the markdown:</p>

<pre><code><span class="code">"Returns a [some-terrible-github-link-to-html][MAT] object."</span></code></pre>

<p>... read the rest of <a href="pax-world.html" title="PAX World">PAX World</a>.</p>

<h1><a href="lisp-overview.html" title="Posts tagged `lisp`">... see older posts</a></h1>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': ''});</script>
</body>
</html>
