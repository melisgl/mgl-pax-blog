<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>PAX and DRef v0.4</title>
<link type='text/css' href='style.css' rel='stylesheet'>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="viewport" content="width=device-width">
<script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>
   <!-- Google tag (gtag.js) -->
<script async src='https://www.googletagmanager.com/gtag/js?id=G-7X64Q1D73F'></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-7X64Q1D73F');
</script>
<script src='grid.js'></script>
<link rel='shortcut icon' type='image/png' href='favicon.png'>
<link rel='preconnect' href='https://fonts.googleapis.com'>
<link rel='preconnect' href='https://fonts.gstatic.com' crossorigin>
<link href='https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap' rel='stylesheet'>
<style> @import url('https://fonts.googleapis.com/css2?family=Roboto+Mono:ital,wght@0,400;0,700;1,400;1,700&display=swap'); </style>
<link rel='alternate' href='http://quotenil.com/blog.rss' type='application/rss+xml'/>

</head>
<body>
<div id="content-container">
<div id=toc>
 <div id=home>
  <a href=blog.html><code>(QUOTE NIL)</code></a>
 </div>
 <div id=links>
  Ramblings on <a href=ai.html>ai</a>, <a href=lisp.html>lisp</a>, <a href=tech.html>tech</a> 
  and <a href=personal.html>personal</a> topics by <a href=about-me.html>me</a>.
 </div>
</div><div id="content">
<p><a id="x-28MGL-PAX-BLOG-3A-40PAX-V0-2E4-20MGL-PAX-3ASECTION-29"></a>
<a id="MGL-PAX-BLOG:@PAX-V0.4%20MGL-PAX:SECTION"></a></p>

<h1><a href="pax-v0.4.html">PAX and DRef v0.4</a></h1>

<p><span class='post-data'><em>Tags:</em> <a href="tech.html" title="tech"><code>tech</code></a>, <a href="lisp.html" title="lisp"><code>lisp</code></a>,&nbsp; <em>Date:</em> 2025-04-23</span></p>

<div class='br'></div>

<p>Version 0.4 of <a href="https://github.com/melisgl/mgl-pax" title="PAX">PAX</a>, the documentation system, and <a href="https://github.com/melisgl/mgl-pax/tree/master/dref/" title="DRef">DRef</a>, the
definition reifier, was released. There were large refactorings, bug
fixes, minor features, cosmetics, documentation and performance
improvements <a href="https://github.com/melisgl/mgl-pax/commits/parse-word" >too numerous to
list</a>.</p>

<p>Here is a summary of the new features and notable changes.</p>

<ul>
<li><p>DRef now supports
  <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF:@DTYPES%20MGL-PAX:SECTION" ><code>DTYPE</code>s</a>,
  which allow filtering
  <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF:DEFINITIONS%20FUNCTION" ><code>DEFINITIONS</code></a>
  and
  <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF:DREF-APROPOS%20FUNCTION" ><code>DREF-APROPOS</code></a>
  results according to the locative type hierarchy:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'print</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF PRINT FUNCTION&gt;
--&gt;  #&lt;DREF PRINT <span class="paren2">(<span class="code">UNKNOWN <span class="paren3">(<span class="code"><span class="keyword">:DEFOPTIMIZER</span> PRINT SB-C:DERIVE-TYPE</span>)</span></span>)</span>&gt;
--&gt;  #&lt;DREF PRINT <span class="paren2">(<span class="code">UNKNOWN
--&gt;                <span class="paren3">(<span class="code">DECLAIM PRINT
--&gt;                         <i><span class="symbol">SB-C:DEFKNOWN</span></i></span>)</span></span>)</span>&gt;</span>)</span></span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'print <span class="keyword">:dtype</span> '<span class="paren2">(<span class="code">and t <span class="paren3">(<span class="code">not unknown</span>)</span></span>)</span></span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF PRINT FUNCTION&gt;</span>)</span></span></code></pre>

<p>The <code>AND T</code> bit restricts the query to definitions in the
running Lisp. The top of the <code>DTYPE</code> hierarchy is
<a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF:TOP%20DREF:DTYPE" ><code>DREF:TOP</code></a>,
which includes external definitions such as the <code>CLHS</code>, that comes
with PAX:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">definitions</span></i> 'print <span class="keyword">:dtype</span> '<span class="paren2">(<span class="code">not unknown</span>)</span></span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF PRINT <span class="paren2">(<span class="code">CLHS <i><span class="symbol">FUNCTION</span></i></span>)</span>&gt; #&lt;DREF PRINT FUNCTION&gt;</span>)</span></span></code></pre>

<pre><code><span class="code"><span class="paren1">(<span class="code">dref-apropos <span class="string">"method"</span> <span class="keyword">:package</span> <span class="keyword">:dref</span> <span class="keyword">:external-only</span> t <span class="keyword">:dtype</span> 'class</span>)</span>
==&gt; <span class="paren1">(<span class="code">#&lt;DREF METHOD CLASS&gt; #&lt;DREF METHOD-COMBINATION CLASS&gt;</span>)</span></span></code></pre>

<p>The <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF-EXT:@LOCATIVE-TYPE-HIERARCHY%20MGL-PAX:SECTION" >locative type
hierarchy</a>
can be queried programmatically, and this information is included in their documentation (see for example <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#GENERIC-FUNCTION%20MGL-PAX:LOCATIVE" >the <code>GENERIC-FUNCTION</code> locative type</a>).</p></li>
<li><p>The <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:@PAX-LIVE-HOME-PAGE%20MGL-PAX:SECTION" >PAX Live Home
  Page</a>
  better supports exploration without having to leave the browser.
  <a href="https://youtu.be/4bl8PS8OW94" >See the video.</a></p>

<ul>
<li><p>It lists packages grouped by ASDF systems that define
  them (when this can be determined from the source locations).</p></li>
<li><p>It links to apropos pages for each locative type.</p></li>
<li><p>It has an input box for looking up documentation right from
  the browser (as if with <code>mgl-pax-document</code> from Emacs).</p></li>
<li><p>It has an input box for looking up apropos right from the
  browser (as if with <code>mgl-pax-apropos</code> from Emacs).</p></li>
<li><p>The web server can be
  <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:ENSURE-WEB-SERVER%20FUNCTION" >started</a>
  without Emacs.</p></li>
</ul></li>
<li><p>Completion of names and locatives in Emacs is much improved.</p></li>
<li><p>New aliases were added to the <code>CLHS</code> pages documenting format
  directives (e.g. <code>~F</code>), standard macro characters (<code>#A</code>) and loop
  keywords (<code>sum</code>, <code>:sum</code>, <code>loop:sum</code>), so that one can just
  <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:@BROWSING-LIVE-DOCUMENTATION%20MGL-PAX:SECTION" ><code>C-.</code></a> (<code>mgl-pax-document</code>)
  them. See the documentation of the <a href="https://melisgl.github.io/mgl-pax-world/pax-manual.html#MGL-PAX:CLHS%20MGL-PAX:LOCATIVE" ><code>CLHS</code>
  locative</a>.</p></li>
<li><p>The <a href="https://melisgl.github.io/mgl-pax-world/dref-manual.html#DREF-EXT:@EXTENDING-DREF%20MGL-PAX:SECTION" >DRef extension
  api</a>
  has been cleaned up.</p></li>
</ul>
<img src="blog-files/die.png" alt="end-of-post" />
  </div>
</div>
<script>$('#page-toc').toc({'selectors': ''});</script>
</body>
</html>
