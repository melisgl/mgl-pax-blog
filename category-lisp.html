<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>
<head>
<title>Lisp</title>
<link type='text/css' href='style.css' rel='stylesheet'/>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<script src="jquery.min.js"></script>
<script src="toc.min.js"></script>
<script type="text/x-mathjax-config">
     MathJax.Hub.Config({
       tex2jax: {
         inlineMath: [['$','$']],
         processEscapes: true
       }
     });
   </script>
   <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
   </script>
   </head>
<body>
<div id="content-container">
<div id="toc">
<div class="menu-block"><span class="menu-block-title">me</span><ul><li><a href="http://quotenil.com">blog</a></li><li><a href="mailto:mega@retes.hu">email</a></li><li><a href="mega.gpg.asc">gpg key</a></li><li><a href="cv/cv-eng.pdf">cv (english)</a></li><li><a href="cv/cv-hun.pdf">cv (hungarian)</a></li><li><a href="http://github.com/melisgl/">git</a></li></ul></div><div class="menu-block"><span class="menu-block-title">categories</span><ul><li><a href="http://quotenil.com/blog.html">all</a></li><li><a href="http://quotenil.com/category-personal.html">personal</a></li><li><a href="http://quotenil.com/category-tech.html">tech</a></li><li><a href="http://quotenil.com/category-lisp.html">lisp</a></li><li><a href="http://quotenil.com/category-ai.html">ai</a></li></ul></div><div id="page-toc">
</div>
<div id="toc-footer"><ul><li><a href="https://github.com/melisgl/mgl-pax">[generated by MGL-PAX]</a></li></ul></div>
</div>
<div id="content">
<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40JOURNAL-THE-KITCHEN-SINK-SHORT-20MGL-PAX-3ASECTION-29" title="Journal, the kitchen sink">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8634;</a></span></span></p>

<h1><a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29">Lisp</a></h1>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40JOURNAL-THE-KITCHEN-SINK-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MOVING-THE-BLOG-TO-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="Moving the blog to PAX">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40JOURNAL-THE-KITCHEN-SINK-SHORT-20MGL-PAX-3ASECTION-29" title="Journal, the kitchen sink">&#8634;</a></span></span></p>

<h2><a href="journal-the-kitchen-sink.html#x-28MGL-PAX-BLOG-3A-40JOURNAL-THE-KITCHEN-SINK-20MGL-PAX-3ASECTION-29" title="Journal, the kitchen sink">Journal, the kitchen sink</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2020-09-04</em> -- Ever wished for machine-readable logs and
<a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_tracec.htm" ><code>TRACE</code></a>s, maybe for writing tests or something more
fancy? The <a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40JOURNAL-BACKGROUND-20MGL-PAX-3ASECTION-29" >Journal</a> library takes a simple
idea: user-defined execution traces, and implements
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40LOGGING-20MGL-PAX-3ASECTION-29" >logging</a>, <a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40TRACING-20MGL-PAX-3ASECTION-29" >tracing</a>, a
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40TESTING-20MGL-PAX-3ASECTION-29" >testing</a> &quot;framework&quot; with <a href="https://en.wikipedia.org/wiki/Mock_object" >mock</a>
support, and an <a href="https://martinfowler.com/eaaDev/EventSourcing.html" >Event Sourcing</a> style
<a href="http://melisgl.github.io/mgl-pax-world/journal-manual.html#x-28JOURNAL-3A-40PERSISTENCE-20MGL-PAX-3ASECTION-29" >database</a> on top.</p>

<p>Perhaps the highlight from the linked tutorials is how easy
persistence is. Let's write a simple game:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> play-guess-my-number <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">my-number <span class="paren5">(<span class="code">random 10</span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">format t <span class="string">"~%I thought of a number.~%"</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for i upfrom 0 do
      <span class="paren4">(<span class="code">write-line <span class="string">"Guess my number:"</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">guess <span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">parse-integer <span class="paren3">(<span class="code">read-line</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">format t <span class="string">"You guessed ~D.~%"</span> guess</span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">= guess my-number</span>)</span>
          <span class="paren6">(<span class="code">format t <span class="string">"You guessed it in ~D tries!"</span> <span class="paren1">(<span class="code">1+ i</span>)</span></span>)</span>
          <span class="paren6">(<span class="code">return</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>That came out pretty ugly, didn't it? Now, suppose we want to turn
this into a browser game so:</p>

<ul>
<li><p>the state of the game must be saved,</p></li>
<li><p>and the game shall be resumed from the last saved state,</p></li>
<li><p>even if the web server's worker thread times out, or there is a
  power failure.</p></li>
</ul>

<p>So these are the requirements apart from adding the webby stuff,
which I'm not going to bore you with. To implement them, we wrap
<code>REPLAYED</code> around <em>external interactions</em>, <code>RANDOM</code> and <code>READ-LINE</code>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defun</span></i> play-guess-my-number <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren3">(<span class="code"><span class="paren4">(<span class="code">my-number <span class="paren5">(<span class="code">replayed <span class="paren6">(<span class="code">think-of-a-number</span>)</span> <span class="comment">; &lt;- HERE
</span>                     <span class="paren6">(<span class="code">random 10</span>)</span></span>)</span></span>)</span></span>)</span>
    <span class="paren3">(<span class="code">format t <span class="string">"~%I thought of a number.~%"</span></span>)</span>
    <span class="paren3">(<span class="code"><i><span class="symbol">loop</span></i> for i upfrom 0 do
      <span class="paren4">(<span class="code">write-line <span class="string">"Guess my number:"</span></span>)</span>
      <span class="paren4">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren5">(<span class="code"><span class="paren6">(<span class="code">guess <span class="paren1">(<span class="code">replayed <span class="paren2">(<span class="code">read-guess</span>)</span>        <span class="comment">; &lt;- HERE
</span>                     <span class="paren2">(<span class="code">values <span class="paren3">(<span class="code">parse-integer <span class="paren4">(<span class="code">read-line</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span>
        <span class="paren5">(<span class="code">format t <span class="string">"You guessed ~D.~%"</span> guess</span>)</span>
        <span class="paren5">(<span class="code">when <span class="paren6">(<span class="code">= guess my-number</span>)</span>
          <span class="paren6">(<span class="code">format t <span class="string">"You guessed it in ~D tries!"</span> <span class="paren1">(<span class="code">1+ i</span>)</span></span>)</span>
          <span class="paren6">(<span class="code">return</span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>Now, we need to say where to store the event journal:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">with-bundle</span></i> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">make-file-bundle <span class="string">"/tmp/guess-my-number/"</span> <span class="keyword">:sync</span> t</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">play-guess-my-number</span>)</span></span>)</span></span></code></pre>

<p>This is invoked from the web server's worker and it replays the game
until it was interrupted last time around. Then it will block
waiting for user input in <code>READ-LINE</code> or, if the game is finished,
return.</p>

<p>Note the <code>:SYNC T</code>, which tells Journal to take durability seriously.</p>

<p>You can find the code <a href="https://github.com/melisgl/journal" >here</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MOVING-THE-BLOG-TO-PAX-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40JOURNAL-THE-KITCHEN-SINK-SHORT-20MGL-PAX-3ASECTION-29" title="Journal, the kitchen sink">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT-20MGL-PAX-3ASECTION-29" title="On the Design of Matrix Libraries">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MOVING-THE-BLOG-TO-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="Moving the blog to PAX">&#8634;</a></span></span></p>

<h2><a href="moving-the-blog-to-pax.html#x-28MGL-PAX-BLOG-3A-40MOVING-THE-BLOG-TO-PAX-20MGL-PAX-3ASECTION-29" title="Moving the blog to PAX">Moving the blog to PAX</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="category-tech.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-TECH-20MGL-PAX-3ASECTION-29" title="Tech">Tech</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2020-05-05</em> -- After more than five years of silence, I may be
resurrecting <a href="https://web.archive.org/web/20190814015233/http://quotenil.com/" >my old
blog</a>.
I already got as far as rewriting it using
<a href="http://melisgl.github.io/mgl-pax/" >MGL-PAX</a>, which is a curious
choice because <code>PAX</code> is a documentation generator for Common Lisp. The
blog &quot;engine&quot; is rather bare-bones, but works admirably,
especially considering that the implementation is only 72 lines of
code, most of which deals with post categories and overview pages
with shortened posts, something <code>PAX</code> hasn't seen the need for.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MOVING-THE-BLOG-TO-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="Moving the blog to PAX">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40BIGGER-AND-BADDER-PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="Bigger and Badder PAX World">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT-20MGL-PAX-3ASECTION-29" title="On the Design of Matrix Libraries">&#8634;</a></span></span></p>

<h2><a href="on-the-design-of-matrix-libraries.html#x-28MGL-PAX-BLOG-3A-40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-20MGL-PAX-3ASECTION-29" title="On the Design of Matrix Libraries">On the Design of Matrix Libraries</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>UPDATE 2020-05-03</em> -- Things have been moving fast. This is a
non-issue in Tensorflow and possibly in other frameworks, as well.</p>

<p><em>2015-02-26</em> -- I believe there is one design decision in
<a href="http://melisgl.github.io/mgl-pax-world/mat-manual.html" >MGL-MAT</a>
that has far reaching consequences: to make a single matrix object
capable of storing multiple representations of the same data and let
operations decide which representation to use based on what's the
most convenient or efficient, without having to even know about all
the possible representations.</p>

<p>This allows existing code to keep functioning if support for
diagonal matrices (represented as a 1d array) lands and one can pick
and choose the operations performance critical enough to implement
with diagonals.</p>

<p>... read the rest of <a href="on-the-design-of-matrix-libraries.html#x-28MGL-PAX-BLOG-3A-40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-20MGL-PAX-3ASECTION-29" title="On the Design of Matrix Libraries">On the Design of Matrix Libraries</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40BIGGER-AND-BADDER-PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ON-THE-DESIGN-OF-MATRIX-LIBRARIES-SHORT-20MGL-PAX-3ASECTION-29" title="On the Design of Matrix Libraries">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="PAX World">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40BIGGER-AND-BADDER-PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="Bigger and Badder PAX World">&#8634;</a></span></span></p>

<h2><a href="bigger-and-badder-pax-world.html#x-28MGL-PAX-BLOG-3A-40BIGGER-AND-BADDER-PAX-WORLD-20MGL-PAX-3ASECTION-29" title="Bigger and Badder PAX World">Bigger and Badder PAX World</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2015-02-20</em> -- Bigger because documentation for
<a href="http://melisgl.github.io/mgl-pax-world/named-readtables-manual.html" >named-readtables</a>
and
<a href="http://melisgl.github.io/mgl-pax-world/micmac-manual.html" >micmac</a>
has been added.</p>

<p>Badder because clicking on a name will produce a permalink such as
this:
<a href="http://melisgl.github.io/mgl-pax-world/mgl-pax-manual.html#x-28MGL-PAX-3A-2ADOCUMENT-MARK-UP-SIGNATURES-2A-20-28VARIABLE-29-29" ><em>DOCUMENT-MARK-UP-SIGNATURES</em></a>.
Clicking on locative types such as <code>[variable]</code> on the page that has
just been linked to will take you to the file and line on github
where <code>*DOCUMENT-MARK-UP-SIGNATURES*</code> is defined.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40BIGGER-AND-BADDER-PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="Bigger and Badder PAX World">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40RECURRENT-NETS-SHORT-20MGL-PAX-3ASECTION-29" title="Recurrent Nets">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="PAX World">&#8634;</a></span></span></p>

<h2><a href="pax-world.html#x-28MGL-PAX-BLOG-3A-40PAX-WORLD-20MGL-PAX-3ASECTION-29" title="PAX World">PAX World</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2015-01-26</em> -- The promise of
<a href="https://github.com/melisgl/mgl-pax" >MGL-PAX</a> has always been that
it will be easy to generate documentation for different libraries
without requiring extensive markup and relying on stable urls. For
example, without <code>PAX</code> if a docstring in the <code>MGL</code> library wanted to
reference the matrix class <code>MGL-MAT:MAT</code> from the <code>MGL-MAT</code> library,
it would need to include ugly HTML links in the markdown:</p>

<pre><code><span class="code">"Returns a [some-terrible-github-link-to-html][MAT] object."</span></code></pre>

<p>With <code>PAX</code> however, the uppercase symbol <code>MAT</code> will be automatically
linked to the documentation of <code>MAT</code> if its whereabouts are known at
documentation generation time, so the above becomes:</p>

<pre><code><span class="code">"Returns a MAT object."</span></code></pre>

<p>The easiest way to tell <code>PAX</code> where to link is to let it generate the
documentation for all libraries at the same time like this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">document <span class="paren2">(<span class="code">list mgl-mat:@mat-manual mgl:@mgl-manual</span>)</span></span>)</span></span></code></pre>

<p>This is the gist of what
<a href="https://github.com/melisgl/mgl-pax-world" >MGL-PAX-WORLD</a> does. It
has a list of stuff to document, and it creates a set of HTML files.
Check out how its output looks on <a href="http://melisgl.github.io/mgl-pax-world/" >github
pages</a>. Here is a good
<a href="http://melisgl.github.io/mgl-pax-world/mgl-manual.html#x-28MGL-3A-40MGL-DEPENDENCIES-20MGL-PAX-3ASECTION-29" >example of
cross-links</a>.
It's easy to play with locally: just get the gh-pages branch and
call
<a href="http://melisgl.github.io/mgl-pax-world/mgl-pax-world-manual.html#x-28MGL-PAX-WORLD-3AUPDATE-PAX-WORLD-20FUNCTION-29" >UPDATE-PAX-WORLD</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40RECURRENT-NETS-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PAX-WORLD-SHORT-20MGL-PAX-3ASECTION-29" title="PAX World">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INCLUDE-LOCATIVE-FOR-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="INCLUDE locative for PAX">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40RECURRENT-NETS-SHORT-20MGL-PAX-3ASECTION-29" title="Recurrent Nets">&#8634;</a></span></span></p>

<h2><a href="recurrent-nets.html#x-28MGL-PAX-BLOG-3A-40RECURRENT-NETS-20MGL-PAX-3ASECTION-29" title="Recurrent Nets">Recurrent Nets</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2015-01-19</em> -- I've been cleaning up and documenting
<a href="https://github.com/melisgl/mgl" >MGL</a> for quite some time now and
while it's nowhere near done, a good portion of the code has been
overhauled in the process. There are new additions such as the <a href="http://arxiv.org/abs/1412.6980" >Adam
optimizer</a> and Recurrent Neural
Nets. My efforts were mainly only the backprop stuff and I think the
definition of feed-forward:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">build-fnn <span class="paren2">(<span class="code"><span class="keyword">:class</span> 'digit-fnn</span>)</span>
  <span class="paren2">(<span class="code">input <span class="paren3">(<span class="code">-&gt;input <span class="keyword">:size</span> <span class="special">*n-inputs*</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">hidden-activation <span class="paren3">(<span class="code">-&gt;activation input <span class="keyword">:size</span> n-hiddens</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">hidden <span class="paren3">(<span class="code">-&gt;relu hidden-activation</span>)</span></span>)</span>
  <span class="paren2">(<span class="code">output-activation <span class="paren3">(<span class="code">-&gt;activation hidden <span class="keyword">:size</span> <span class="special">*n-outputs*</span></span>)</span></span>)</span>
  <span class="paren2">(<span class="code">output <span class="paren3">(<span class="code">-&gt;softmax-xe-loss <span class="keyword">:x</span> output-activation</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>and recurrent nets:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">build-rnn <span class="paren2">(<span class="code"></span>)</span>
  <span class="paren2">(<span class="code">build-fnn <span class="paren3">(<span class="code"><span class="keyword">:class</span> 'sum-sign-fnn</span>)</span>
    <span class="paren3">(<span class="code">input <span class="paren4">(<span class="code">-&gt;input <span class="keyword">:size</span> 1</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">h <span class="paren4">(<span class="code">-&gt;lstm input <span class="keyword">:size</span> n-hiddens</span>)</span></span>)</span>
    <span class="paren3">(<span class="code">prediction <span class="paren4">(<span class="code">-&gt;softmax-xe-loss
                 <span class="paren5">(<span class="code">-&gt;activation h <span class="keyword">:name</span> 'prediction <span class="keyword">:size</span> <span class="special">*n-outputs*</span></span>)</span></span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>is fairly straight-forward already. There is still much code that
needs to accompany such a network definition, mostly having to do
with how to give inputs and prediction targets to the network and
also with monitoring training. See the full examples for
<a href="https://github.com/melisgl/mgl/blob/master/doc/md/mgl-manual.md#x-28MGL-BP-3A-40MGL-FNN-TUTORIAL-20MGL-PAX-3ASECTION-29" >feed-forward</a>
and
<a href="https://github.com/melisgl/mgl/blob/master/doc/md/mgl-manual.md#x-28MGL-BP-3A-40MGL-RNN-TUTORIAL-20MGL-PAX-3ASECTION-29" >recurrent</a>
nets in the documentation.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INCLUDE-LOCATIVE-FOR-PAX-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40RECURRENT-NETS-SHORT-20MGL-PAX-3ASECTION-29" title="Recurrent Nets">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40TRANSCRIPTS-SHORT-20MGL-PAX-3ASECTION-29" title="Transcripts">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INCLUDE-LOCATIVE-FOR-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="INCLUDE locative for PAX">&#8634;</a></span></span></p>

<h2><a href="include-locative-for-pax.html#x-28MGL-PAX-BLOG-3A-40INCLUDE-LOCATIVE-FOR-PAX-20MGL-PAX-3ASECTION-29" title="INCLUDE locative for PAX">INCLUDE locative for PAX</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2014-12-06</em> -- I'm getting so used to the <code>M-.</code> plus documentation
generation hack that's
<a href="https://github.com/melisgl/mgl-pax" >MGL-PAX</a>, that I use it for all
new code, which highlighted an issue of with code examples.</p>

<p>The problem is that, the ideally runnable, examples had to live in
docstrings. Small code examples presented as verifiable <a href="transcripts.html#x-28MGL-PAX-BLOG-3A-40TRANSCRIPTS-20MGL-PAX-3ASECTION-29" title="Transcripts">Transcripts</a>
within docstrings were great, but developing anything beyond a
couple of forms of code in docstrings or copy-pasting them from
source files to docstrings is insanity or an
<a href="http://c2.com/cgi/wiki?OnceAndOnlyOnce" >OOAO</a> violation,
respectively.</p>

<p>In response to this, <code>PAX</code> got the <a href="https://github.com/melisgl/mgl-pax#x-28MGL-PAX-3AINCLUDE-20MGL-PAX-3ALOCATIVE-29" >INCLUDE
locative</a> (see
the linked documentation) and became its own first user at the same
time. In a nutshell, the <code>INCLUDE</code> locative can refer to non-lisp
files and sections of lisp source files which makes it easy to add
code examples and external stuff to the documentation without
duplication. As always, <code>M-.</code> works as well.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40TRANSCRIPTS-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INCLUDE-LOCATIVE-FOR-PAX-SHORT-20MGL-PAX-3ASECTION-29" title="INCLUDE locative for PAX">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MIGRATION-TO-GITHUB-SHORT-20MGL-PAX-3ASECTION-29" title="Migration to github">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40TRANSCRIPTS-SHORT-20MGL-PAX-3ASECTION-29" title="Transcripts">&#8634;</a></span></span></p>

<h2><a href="transcripts.html#x-28MGL-PAX-BLOG-3A-40TRANSCRIPTS-20MGL-PAX-3ASECTION-29" title="Transcripts">Transcripts</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2014-10-20</em> -- I've just committed a major feature to <code>MGL-PAX</code>:
the ability to include code examples in docstrings. Printed output
and return values are marked up with &quot;..&quot; and &quot;=&gt;&quot;, respectively.</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">values <span class="paren2">(<span class="code">princ <span class="keyword">:hello</span></span>)</span> <span class="paren2">(<span class="code">list 1 2</span>)</span></span>)</span>
.. HELLO
=&gt; :HELLO
=&gt; <span class="paren1">(<span class="code">1 2</span>)</span></span></code></pre>

<p>The extras are:</p>

<ul>
<li><p>parsing back and <em>updating</em> a transcript</p></li>
<li><p><em>auto-checking</em> of up-to-dateness at documentation generation time</p></li>
<li><p>readable return values can be commented, hand-indented without
  breaking consistency checks and updates will not destroy those
  changes</p></li>
<li><p>Emacs integration: transcribing the last expression and updating a
  transcript in a region.</p></li>
<li><p><a href="https://github.com/melisgl/mgl-pax#x-28MGL-PAX-3ATRANSCRIBE-20FUNCTION-29" >TRANSCRIBE</a>
  works without the rest of <code>MGL-PAX</code> so it can be used to
  format bug reports or as a poor man's expect script.</p></li>
</ul>

<p>The
<a href="https://github.com/melisgl/mgl-pax#x-28MGL-PAX-3A-40MGL-PAX-TRANSCRIPT-20MGL-PAX-3ASECTION-29" >documentation</a>
provides a tutorialish treatment. I hope you'll find it useful.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MIGRATION-TO-GITHUB-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40TRANSCRIPTS-SHORT-20MGL-PAX-3ASECTION-29" title="Transcripts">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-BITS-AND-PIECES-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Bits and Pieces">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MIGRATION-TO-GITHUB-SHORT-20MGL-PAX-3ASECTION-29" title="Migration to github">&#8634;</a></span></span></p>

<h2><a href="migration-to-github.html#x-28MGL-PAX-BLOG-3A-40MIGRATION-TO-GITHUB-20MGL-PAX-3ASECTION-29" title="Migration to github">Migration to github</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2014-09-25</em> -- Due to the bash security hole that keeps
<a href="http://seclists.org/oss-sec/2014/q3/685" >giving</a>, I had to disable
gitweb at <a href="http://quotenil.com/git/" >http://quotenil.com/git/</a> and
move all non-obsolete code over to github. This affects:</p>

<ul>
<li><p><a href="https://github.com/melisgl/six" >Six the Hex AI</a>,</p></li>
<li><p><a href="https://github.com/melisgl/planet-wars" >the Planet Wars bot</a>,</p></li>
<li><p><a href="https://github.com/melisgl/micmac" >MiCMaC</a>,</p></li>
<li><p><a href="https://github.com/melisgl/fsvd" >FSVD</a>,</p></li>
<li><p><a href="https://github.com/melisgl/lassie" >Lassie</a>, and</p></li>
<li><p><a href="https://github.com/melisgl/cl-libsvm" >cl-libsvm</a>.</p></li>
</ul>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-BITS-AND-PIECES-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MIGRATION-TO-GITHUB-SHORT-20MGL-PAX-3ASECTION-29" title="Migration to github">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Post-Mortem">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-BITS-AND-PIECES-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Bits and Pieces">&#8634;</a></span></span></p>

<h2><a href="higgs-boson-machine-learning-challenge-bits-and-pieces.html#x-28MGL-PAX-BLOG-3A-40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-BITS-AND-PIECES-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Bits and Pieces">Higgs Boson Machine Learning Challenge Bits and Pieces</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2014-09-23</em> -- The <a href="http://www.kaggle.com/c/higgs-boson" >Higgs Boson
contest</a> on
<a href="http://kaggle.com" >Kaggle</a> has ended. Sticking to my word at <a href="http://medias.ircam.fr/xff38ba" >ELS
2014</a>, I released some code that
came about during these long four months.</p>

<p><a href="https://github.com/melisgl/mgl-gpr" >MGL-GPR</a> is no longer a
<a href="http://en.wikipedia.org/wiki/Genetic_programming" >Genetic
Programming</a> only
library because it got another <a href="http://en.wikipedia.org/wiki/Evolutionary_algorithm" >Evolutionary
Algorithm</a>
implementation: <a href="http://en.wikipedia.org/wiki/Differential_evolution" >Differential
Evolution</a>. My
original plan for this contest was to breed input features that the
physicists in their insistence on comprehensibility overlooked, but
it didn't work as well as I had hoped for reasons specific to this
contest and also because evolutionary algorithms just do not scale
to larger problem sizes.</p>

<p>In other news, <a href="http://quotenil.com/git/?p=mgl.git;a=summary" >MGL</a>
got (http://en.wikipedia.org/wiki/Cross-validation_<a href="statistics" >cross-validation</a>),
<a href="http://en.wikipedia.org/wiki/Bootstrap_aggregating" >bagging</a> and
stratification support in the brand new
<a href="http://quotenil.com/git/?p=mgl.git;a=blob;f=src/resample.lisp;h=cb83c5962eb29e57b3d3f8f0e407b0e30bc9732d;hb=91c5ddaae870d4a8acaa67f54d0876eead2cd6a9" >MGL-RESAMPLE</a>
package documented with
<a href="https://github.com/melisgl/mgl-pax" >MGL-PAX</a> which all of you will
most definitely want to use. My winning submission used bagged
cross-validated dropout neural networks with stratified splits so
this is where it's coming from.</p>

<p><code>MGL</code> itself and <a href="https://github.com/melisgl/mgl-mat" >MGL-MAT</a> were
updated to work with the latest
<a href="https://github.com/takagi/cl-cuda" >CL-CUDA</a>. The neural network
code also saw some additions such as
<a href="http://arxiv.org/abs/1312.1909" >-&gt;MAX-CHANNEL</a> activation (which
originated as <a href="http://people.idsia.ch/~juergen/nips2013.pdf" >LWTA</a>)
and also gaussian multiplicative noise. The next steps here are
further cleanups to <code>MGL</code>, writing documentation and moving it to
github. Also, there is some hope that one day <code>CL-CUDA</code> can be
included in quicklisp allowing my stuff there to be updated to their
latest versions.</p>

<p>The code for this contest is available at
(https://github.com/melisgl/higgsml)which from now on doubles as my
skeleton for lisp projects that need to be delivered as source and
as binary. It sucks in all dependencies from quicklisp available at
a certain date, clones the necessary repositories not available in
quicklisp, builds an executable, and has a simple 'make dist' rule
as well.</p>

<p>There is also a fairly generic ensembling algorithm that I will
factor out of the code later.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-BITS-AND-PIECES-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Bits and Pieces">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40LIBLINEAR-SUPPORT-ADDED-TO-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Liblinear Support Added to cl-libsvm">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Post-Mortem">&#8634;</a></span></span></p>

<h2><a href="higgs-boson-machine-learning-challenge-post-mortem.html#x-28MGL-PAX-BLOG-3A-40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-POST-MORTEM-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Post-Mortem">Higgs Boson Machine Learning Challenge Post-Mortem</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2014-09-23</em> -- Actually, I'll only link to the
<a href="http://www.kaggle.com/c/higgs-boson/forums/t/10344/winning-methodology-sharing/53944#post53944" >post-mortem</a>
I wrote in the forum. There is a also a <a href="https://github.com/melisgl/higgsml/blob/master/doc/model.md" >model
description</a>
included in the <a href="https://github.com/melisgl/higgsml" >git repo</a>. A
stand-alone distribution with all library dependencies and an x86-64
linux precompiled binary is also
<a href="http://quotenil.com/higgsml/gabor-melis.zip" >available</a>.</p>

<p>This has been the Kaggle competition that attracted the most
contestants so it feels really good to come out on top even though
there was an element of luck involved due to the choice of
evaluation metric and the amount of data available. The organizers
did a great job explaining the physics, why there is no more data,
motivating the choice of evaluation metric, and being prompt in
communication in general.</p>

<p>I hope that the HEP guys will find this useful in their search for
more evidence of tau tau decay of the Higgs boson. Note that I
didn't go for the 'HEP meets ML Award' so training time is
unnecessarily high
(one day with a GTX Titan GPU). By switching to single precision
floating point and a single neural network, training time could be
reduced to about 15 minutes with an expected drop in accuracy from
3.805 to about 3.750. Even with the bagging approach the code logs
out-of-bag estimates of the evaluation metric after training each
constituent model and the training process can be C-c'ed early.
Furthermore, the model can be run on a CPU with BLAS about 10 times
slower than on a Titan.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40LIBLINEAR-SUPPORT-ADDED-TO-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40HIGGS-BOSON-MACHINE-LEARNING-CHALLENGE-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Higgs Boson Machine Learning Challenge Post-Mortem">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40STACKOVERFLOW-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Stackoverflow Post-Mortem">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40LIBLINEAR-SUPPORT-ADDED-TO-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Liblinear Support Added to cl-libsvm">&#8634;</a></span></span></p>

<h2><a href="liblinear-support-added-to-cl-libsvm.html#x-28MGL-PAX-BLOG-3A-40LIBLINEAR-SUPPORT-ADDED-TO-CL-LIBSVM-20MGL-PAX-3ASECTION-29" title="Liblinear Support Added to cl-libsvm">Liblinear Support Added to cl-libsvm</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2013-04-09</em> -- In addition to the cl-libsvm asdf system, there is
now another asdf system in the <a href="http://quotenil.com/git/?p=cl-libsvm.git;a=summary" >
cl-libsvm</a>
library: cl-liblinear that, predictably enough, is a wrapper for
<a href="http://www.csie.ntu.edu.tw/~cjlin/liblinear/" >liblinear</a>. The API
is similar to that of cl-libsvm.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40STACKOVERFLOW-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40LIBLINEAR-SUPPORT-ADDED-TO-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Liblinear Support Added to cl-libsvm">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ALPHA-BETA-SHORT-20MGL-PAX-3ASECTION-29" title="Alpha-beta">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40STACKOVERFLOW-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Stackoverflow Post-Mortem">&#8634;</a></span></span></p>

<h2><a href="stackoverflow-post-mortem.html#x-28MGL-PAX-BLOG-3A-40STACKOVERFLOW-POST-MORTEM-20MGL-PAX-3ASECTION-29" title="Stackoverflow Post-Mortem">Stackoverflow Post-Mortem</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2013-04-09</em> -- After almost two years without a single
competition, last September I decided to enter the
<a href="http://www.kaggle.com/c/predict-closed-questions-on-stack-overflow" >Stackoverflow</a>
contest on <a href="http://kaggle.com" >Kaggle</a>. It was a straightforward
text classification problem with extremely unbalanced classes.</p>

<p>Just as Bocsimack√≥ did the last time around, his lazier sidekick
<img src="blog-files/malacka-es-bocsimacko.jpg" alt="Malacka" /> (on the right) brought
<a href="http://www.kaggle.com/c/predict-closed-questions-on-stack-overflow/leaderboard" >success</a>.
I would have loved to be lazy and still win, but the leaderboard was
too close for comfort.</p>

<p>... read the rest of <a href="stackoverflow-post-mortem.html#x-28MGL-PAX-BLOG-3A-40STACKOVERFLOW-POST-MORTEM-20MGL-PAX-3ASECTION-29" title="Stackoverflow Post-Mortem">Stackoverflow Post-Mortem</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ALPHA-BETA-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40STACKOVERFLOW-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Stackoverflow Post-Mortem">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40NASH-EQUILIBRIUM-FINDER-SHORT-20MGL-PAX-3ASECTION-29" title="Nash equilibrium finder">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ALPHA-BETA-SHORT-20MGL-PAX-3ASECTION-29" title="Alpha-beta">&#8634;</a></span></span></p>

<h2><a href="alpha-beta.html#x-28MGL-PAX-BLOG-3A-40ALPHA-BETA-20MGL-PAX-3ASECTION-29" title="Alpha-beta">Alpha-beta</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-12-27</em> -- It hasn't been a year yet since I first promised
that alpha-beta snippet and it is already added to micmac in all its
<a href="http://quotenil.com/git/?p=micmac.git;a=blob;f=src/game-theory.lisp;h=9e38d1f09a1f443bc14e115f9abc68dd5f64f6f3;hb=e2de0e888ce103b026d725297f52f5710273a5c3#l71" >35 line
glory</a>.
The good thing about not rushing it out the door is that it saw more
a bit more use. For a tutorialish tic-tac-toe example see
<a href="http://quotenil.com/git/?p=micmac.git;a=blob;f=test/test-game-theory.lisp;h=f6c77e7a3104993c5bc1e01b75a4c94a1d6489e9;hb=e2de0e888ce103b026d725297f52f5710273a5c3#l18" >test/test-game-theory.lisp.</a></p>

<p>The logging code in the example produces
<a href="blog-files/alpha-beta-log.png" title="output">output</a>, which is suitable for
cut and pasting into an org-mode buffer and exploring it by TABbing
into subtrees to answer the perpetual 'What the hell was it
thinking?!' question.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40NASH-EQUILIBRIUM-FINDER-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ALPHA-BETA-SHORT-20MGL-PAX-3ASECTION-29" title="Alpha-beta">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Post-Mortem">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40NASH-EQUILIBRIUM-FINDER-SHORT-20MGL-PAX-3ASECTION-29" title="Nash equilibrium finder">&#8634;</a></span></span></p>

<h2><a href="nash-equilibrium-finder.html#x-28MGL-PAX-BLOG-3A-40NASH-EQUILIBRIUM-FINDER-20MGL-PAX-3ASECTION-29" title="Nash equilibrium finder">Nash equilibrium finder</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-12-26</em> -- While I seem to be unable to make my mind up on a
good interface to alpha-beta with a few bells and whistles, I added
a Nash equilibrium finder to <a href="http://cliki.net/micmac" >Micmac</a>
that's becoming less statistics oriented. This was one of the many
things in Planet Wars that never really made it.</p>

<p>Let's consider the <a href="http://en.wikipedia.org/wiki/Matching_pennies" >Matching
pennies</a> game. The
row player wins iff the two pennies show the same side. The payoff
matrix is:</p>

<pre><code>|       | Heads | Tails |
+-------+-------+-------+
| Heads |     1 |    -1 |
| Tails |    -1 |     1 |
</code></pre>

<p>Find the mixed strategy equilibrium:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">find-nash-equilibrium '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code">-1 1</span>)</span> <span class="paren3">(<span class="code">1 -1</span>)</span></span>)</span></span>)</span>
=&gt;
#<span class="paren1">(<span class="code">49 51</span>)</span>
#<span class="paren1">(<span class="code">50 50</span>)</span>
-0.01</span></code></pre>

<p>That is both players should choose heads 50% of the time and the
expected payoff (for the row player) is zero of which -0.01 is an
approximation:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code">find-nash-equilibrium '<span class="paren2">(<span class="code"><span class="paren3">(<span class="code">-1 1</span>)</span> <span class="paren3">(<span class="code">1 -1</span>)</span></span>)</span> <span class="keyword">:n-iterations</span> 1000</span>)</span>
=&gt;
#<span class="paren1">(<span class="code">499 501</span>)</span>
#<span class="paren1">(<span class="code">500 500</span>)</span>
-0.001</span></code></pre>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40NASH-EQUILIBRIUM-FINDER-SHORT-20MGL-PAX-3ASECTION-29" title="Nash equilibrium finder">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40IMPORTANT-UPDATE-TO-THE-PLANET-WARS-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Important Update to the Planet Wars Starter Package">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Post-Mortem">&#8634;</a></span></span></p>

<h2><a href="planet-wars-post-mortem.html#x-28MGL-PAX-BLOG-3A-40PLANET-WARS-POST-MORTEM-20MGL-PAX-3ASECTION-29" title="Planet Wars Post-Mortem">Planet Wars Post-Mortem</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-12-01</em> -- I can't believe I <a href="https://web.archive.org/web/20101205003152/http://ai-contest.com/rankings.php" >won</a>.</p>

<p>I can't believe I won <em>decisively</em> at all.</p>

<p>The lead in the last month or so was an indicator of having good
chances, but there was a huge shuffling of ranks in the last week
and some last minute casualties.</p>

<h3>Code</h3>

<p>Note that the git repository is available at
<a href="http://quotenil.com/git/planet-wars.git" >http://quotenil.com/git/planet-wars.git</a> 
(<a href="http://quotenil.com/git/?p=planet-wars.git" >gitweb</a>).</p>

<h3>Denial</h3>

<p>I had promised myself not to enter this one and resisted for about
two weeks when my defenses were worn away and I was drawn into the
fray.</p>

<p>The game didn't look very exciting at first. I thought that the bots
would soon reach a point of near perfect tactics and the
rock-paper-scissors scenarios would dominate (more on this later).</p>

<p>That's enough of
<a href="https://web.archive.org/web/20100307014152/http://www.a1k0n.net/blah/archives/2010/03/index.html" >tribute</a>,
let's steer off the trodden path.</p>

<p>... read the rest of <a href="planet-wars-post-mortem.html#x-28MGL-PAX-BLOG-3A-40PLANET-WARS-POST-MORTEM-20MGL-PAX-3ASECTION-29" title="Planet Wars Post-Mortem">Planet Wars Post-Mortem</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40IMPORTANT-UPDATE-TO-THE-PLANET-WARS-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-POST-MORTEM-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Post-Mortem">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-THAT-ACTUALLY-WORKS-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package Actually Works">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40IMPORTANT-UPDATE-TO-THE-PLANET-WARS-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Important Update to the Planet Wars Starter Package">&#8634;</a></span></span></p>

<h2><a href="important-update-to-the-planet-wars-starter-package.html#x-28MGL-PAX-BLOG-3A-40IMPORTANT-UPDATE-TO-THE-PLANET-WARS-STARTER-PACKAGE-20MGL-PAX-3ASECTION-29" title="Important Update to the Planet Wars Starter Package">Important Update to the Planet Wars Starter Package</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-10-25</em> -- First, is it possible to get something as simple
as <code>RESOLVE-BATTLE</code> wrong? Apparently, yes. That's what one gets for
trying to port Python code that's pretty foreign in the sense of
being far from the way I'd write it.</p>

<p>More importantly, I found out the hard way that sbcl 1.0.11 that's
<a href="http://code.google.com/p/ai-contest/issues/detail?id=183" >still</a> on
the official servers has a number of bugs in its timer
implementation making <code>WITH-TIMEOUT</code> unreliable. Also, it can
trigger timeouts recursively eventually exceeding the maximum
interrupt nesting depth. Well, &quot;found out&quot; is not the right way to
put it as we did fix most of these bugs ages ago.</p>

<p>In the new starter package (v0.8 in
<a href="http://quotenil.com/git/?p=planet-wars.git;a=summary" >git</a>, <a href="http://quotenil.com/binary/planet-wars/planet-wars-latest.tar.gz" >latest
tarball</a>),
you'll find timer.lisp that's simply backported almost verbatim from
sbcl 1.0.41 to sbcl 1.0.11. Seems to work for me, but I also had to
lower the timeout to 0.8 from 0.98 because the main server is
extremely slow.</p>

<p>The rate at which games are played on the servers is so low that it
takes several days to ascend through the leaderboard. Nevertheless,
an old buggy version is sitting on the
<a href="https://web.archive.org/web/20101025070429/http://ai-contest.com/rankings.php" >top</a> right now. Mind you,
introducing bugs is a great way exlopore the solution space and it's
quite worrisome just how adept I am at this poor man's evolutionary
programming. Most of them have since been fixed while the ideas they
brought to light remain, making the current version much
stronger.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-THAT-ACTUALLY-WORKS-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40IMPORTANT-UPDATE-TO-THE-PLANET-WARS-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Important Update to the Planet Wars Starter Package">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-THAT-ACTUALLY-WORKS-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package Actually Works">&#8634;</a></span></span></p>

<h2><a href="planet-wars-common-lisp-starter-package-that-actually-works.html#x-28MGL-PAX-BLOG-3A-40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-THAT-ACTUALLY-WORKS-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package Actually Works">Planet Wars Common Lisp Starter Package Actually Works</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-09-21</em> -- Released
v0.6 (<a href="http://quotenil.com/git/?p=planet-wars.git;a=summary" >git</a>,
<a href="http://quotenil.com/binary/planet-wars/planet-wars-latest.tar.gz" >latest
tarball</a>).
The way the server compiles lisp submissions was fixed and this
revealed a problem where MyBot.lisp redirected <code>*STANDARD-OUTPUT*</code>
to <code>*ERROR-OUTPUT*</code> causing the server to think compilation
failed.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-THAT-ACTUALLY-WORKS-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package Actually Works">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-RESULTS-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challange 2010 Results">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package">&#8634;</a></span></span></p>

<h2><a href="planet-wars-common-lisp-starter-package.html#x-28MGL-PAX-BLOG-3A-40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package">Planet Wars Common Lisp Starter Package</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-09-19</em> -- The <a href="https://web.archive.org/web/20100926070007/http://ai-contest.com/" >Google AI Challange</a> is
back with a new game that's supposed to be much harder than Tron was
this spring. The branching factor of the game tree is enormous which
only means that straight minimax is out of question this time
around. Whether some cleverness can bring the game within reach of
conventional algorithms remains to be seen.</p>

<p>Anyway, I'm adding <a href="http://quotenil.com/git/?p=planet-wars.git;a=summary" >yet another starter
package</a> (<a href="http://quotenil.com/binary/planet-wars/planet-wars-latest.tar.gz" >latest
tarball</a>)
to the
<a href="http://aerique.blogspot.com/2010/09/planet-wars-common-lisp-start-package.html" >lot</a>.
It is based heavily on aerique's.</p>

<p>... read the rest of <a href="planet-wars-common-lisp-starter-package.html#x-28MGL-PAX-BLOG-3A-40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package">Planet Wars Common Lisp Starter Package</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-RESULTS-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40PLANET-WARS-COMMON-LISP-STARTER-PACKAGE-SHORT-20MGL-PAX-3ASECTION-29" title="Planet Wars Common Lisp Starter Package">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challenge 2010">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-RESULTS-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challange 2010 Results">&#8634;</a></span></span></p>

<h2><a href="google-ai-challenge-2010-results.html#x-28MGL-PAX-BLOG-3A-40GOOGLE-AI-CHALLENGE-2010-RESULTS-20MGL-PAX-3ASECTION-29" title="Google AI Challange 2010 Results">Google AI Challange 2010 Results</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-03-01</em> -- For what has been a fun ride, the official results are now <a href="https://web.archive.org/web/20110724100751/http://csclub.uwaterloo.ca/contest/rankings.php" >available</a>.
In the end, 11th out of 700 is not too bad and it's the highest
ranking non-C++ entry by some margin.</p>

<p>I entered the contest a bit late with a rather specific approach in
mind: <a href="http://senseis.xmp.net/?UCT" >UCT</a>, an algorithm from the
Monte Carlo tree search family. It has been rather successful in
Go (and in Hex too, taking the crown from
<a href="hex/six/index.html" >Six</a>). So with UCT in mind, to serve as a
baseline I implemented a quick
<a href="http://en.wikipedia.org/wiki/Minimax" >minimax</a> with a simple
territory based evaluation function ... that everyone else in the
competition seems to have invented independently. Trouble was
looming because it was doing too well: with looking ahead only one
move (not even considering moves of the opponent) it played a very
nice positional game. That was the first sign that constructing a
good evaluation function may not be as hard for Tron as it is for
Go.</p>

<p>... read the rest of <a href="google-ai-challenge-2010-results.html#x-28MGL-PAX-BLOG-3A-40GOOGLE-AI-CHALLENGE-2010-RESULTS-20MGL-PAX-3ASECTION-29" title="Google AI Challange 2010 Results">Google AI Challange 2010 Results</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-RESULTS-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challange 2010 Results">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MICMAC-INITIAL-RELEASE-SHORT-20MGL-PAX-3ASECTION-29" title="Micmac Initial Release">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challenge 2010">&#8634;</a></span></span></p>

<h2><a href="google-ai-challenge-2010.html#x-28MGL-PAX-BLOG-3A-40GOOGLE-AI-CHALLENGE-2010-20MGL-PAX-3ASECTION-29" title="Google AI Challenge 2010">Google AI Challenge 2010</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-02-11</em> -- Tron is a fun little game of boxing out the
opponent and avoiding crashing into a wall first. The rules are
simple so the barrier to entry into <a href="https://web.archive.org/web/20100207135122/http://csclub.uwaterloo.ca/contest/index.php" >this
contest</a> is low.
Thanks to <a href="http://www.aerique.net/" >aeruiqe</a> who made to Common Lisp
starter pack it took as little as a few hours to get a very bare
bones algorithm going. It's doing surprisingly well: it is number 23
on the
<a href="https://web.archive.org/web/20110724100751/http://csclub.uwaterloo.ca/contest/rankings.php" >leaderboard</a> at
the moment with 43 wins, 2 losses and 9 draws.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MICMAC-INITIAL-RELEASE-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GOOGLE-AI-CHALLENGE-2010-SHORT-20MGL-PAX-3ASECTION-29" title="Google AI Challenge 2010">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40DEEP-BOLTZMANN-MACHINE-ON-MNIST-SHORT-20MGL-PAX-3ASECTION-29" title="Deep Boltzmann Machine on MNIST">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MICMAC-INITIAL-RELEASE-SHORT-20MGL-PAX-3ASECTION-29" title="Micmac Initial Release">&#8634;</a></span></span></p>

<h2><a href="micmac-initial-release.html#x-28MGL-PAX-BLOG-3A-40MICMAC-INITIAL-RELEASE-20MGL-PAX-3ASECTION-29" title="Micmac Initial Release">Micmac Initial Release</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-02-06</em> -- From a failed experiment today I salvaged
<a href="http://cliki.net/micmac" >Micmac</a>, a statistical library wannabe,
that for now only has Metropolis-Hastings MCMC and Metropolis
Coupled MCMC implemented. The code doesn't weigh much but I think it
gets the API right. In other news <a href="http://cliki.net/MGL" >MGL</a> v0.0.6
was released.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40DEEP-BOLTZMANN-MACHINE-ON-MNIST-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40MICMAC-INITIAL-RELEASE-SHORT-20MGL-PAX-3ASECTION-29" title="Micmac Initial Release">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-3-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 3)">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40DEEP-BOLTZMANN-MACHINE-ON-MNIST-SHORT-20MGL-PAX-3ASECTION-29" title="Deep Boltzmann Machine on MNIST">&#8634;</a></span></span></p>

<h2><a href="deep-boltzmann-machine-on-mnist.html#x-28MGL-PAX-BLOG-3A-40DEEP-BOLTZMANN-MACHINE-ON-MNIST-20MGL-PAX-3ASECTION-29" title="Deep Boltzmann Machine on MNIST">Deep Boltzmann Machine on MNIST</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2010-01-18</em> -- Let me interrupt the flow of the
<a href="http://cliki.net/MGL" >MGL</a> introduction series with a short report
on what I learnt playing with <a href="http://www.cs.toronto.edu/~hinton/absps/dbm.pdf" >Deep Boltzmann
Machines</a>. First,
lots of thanks to Ruslan Salakhutdinov, then at <a href="http://www.cs.toronto.edu/~rsalakhu/" >University of
Toronto</a> now at
<a href="http://web.mit.edu/~rsalakhu/www/" >MIT</a>, for making the Matlab
source <a href="http://web.mit.edu/~rsalakhu/www/DBM.html" >code</a> for the
<a href="http://yann.lecun.com/exdb/mnist/" >MNIST</a> digit classification
problem available.</p>

<p>The linked <a href="http://www.cs.toronto.edu/~hinton/absps/dbm.pdf" >paper</a>
claims a record of 99.05% in classification accuracy on the
permutation invariant task (no prior knowledge of geometry). A
previous approach trained a
<a href="http://www.scholarpedia.org/article/Deep_belief_networks" >DBN</a> in
an unsupervised manner and fine tuned it with backpropagation. Now
there is one more step: turning the DBN into a DBM (Deep Boltzmann
Machine) and tune it further before handing the baton over to
backprop. While in a DBN the constituent RBMs are trained one by
one, the DBM is trained as a whole which, in theory, allows it to
reconcile bottom-up and top-down signals, i.e. what you see and what
you think.</p>

<p>... read the rest of <a href="deep-boltzmann-machine-on-mnist.html#x-28MGL-PAX-BLOG-3A-40DEEP-BOLTZMANN-MACHINE-ON-MNIST-20MGL-PAX-3ASECTION-29" title="Deep Boltzmann Machine on MNIST">Deep Boltzmann Machine on MNIST</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-3-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40DEEP-BOLTZMANN-MACHINE-ON-MNIST-SHORT-20MGL-PAX-3ASECTION-29" title="Deep Boltzmann Machine on MNIST">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-2-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-3-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 3)">&#8634;</a></span></span></p>

<h2><a href="introduction-to-mgl-part-3.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-3-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 3)">Introduction to MGL (part 3)</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><strong>UPDATE</strong>: This post out of date with regards to current <code>MGL</code>.
Please refer to the
<a href="http://melisgl.github.io/mgl-pax-world/mgl-manual.html" >documentation</a>
instead.</p>

<p><em>2009-12-29</em> -- In <a href="introduction-to-mgl-part-2.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-2-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">Introduction to MGL (part 2)</a>, we went through a
trivial example of a backprop network. I said before that the main
focus is on Boltzmann Machines so let's kill the suspense here and
now by cutting straight to the heart of the matter.</p>

<p><a href="http://cseweb.ucsd.edu/users/gary/pubs/cottrell-science-2006.pdf" >Cottrell's Science
article</a>
provides a clear and easy to follow description of the spiral
problem that we are going to implement. The executive summary is
that we want to train an auto-encoder: a network that reproduces its
input as output with a small encoding layer somewhere in between. By
forcing the information through the bottleneck of the encoding layer
the network should pick up a low dimensional code that represents
the input, thus performing dimensionality reduction.</p>

<p>... read the rest of <a href="introduction-to-mgl-part-3.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-3-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 3)">Introduction to MGL (part 3)</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-2-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-3-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 3)">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-1-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-2-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">&#8634;</a></span></span></p>

<h2><a href="introduction-to-mgl-part-2.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-2-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">Introduction to MGL (part 2)</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><strong>UPDATE</strong>: This post out of date with regards to current <code>MGL</code>.
Please refer to the
<a href="http://melisgl.github.io/mgl-pax-world/mgl-manual.html" >documentation</a>
instead.</p>

<p><em>2009-12-17</em> -- After <a href="introduction-to-mgl-part-1.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-1-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">Introduction to MGL (part 1)</a>, today we are
going to walk through a small example and touch on the main concepts
related to learning within this library.</p>

<p>At the top of the food chain is the generic function <code>TRAIN</code>:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defgeneric</span></i> train <span class="paren2">(<span class="code">sampler trainer learner</span>)</span>
  <span class="paren2">(<span class="code"><span class="keyword">:documentation</span> <span class="string">"Train LEARNER with TRAINER on the examples from
SAMPLER. Before that TRAINER is initialized for LEARNER with
INITIALIZE-TRAINER. Training continues until SAMPLER is finished."</span></span>)</span></span>)</span></span></code></pre>

<p>... read the rest of <a href="introduction-to-mgl-part-2.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-2-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">Introduction to MGL (part 2)</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-1-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-2-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 2)">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-SHORT-20MGL-PAX-3ASECTION-29" title="Object Initialization with Slot Dependencies">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-1-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">&#8634;</a></span></span></p>

<h2><a href="introduction-to-mgl-part-1.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-1-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">Introduction to MGL (part 1)</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><strong>UPDATE</strong>: This post out of date with regards to current <code>MGL</code>.
Please refer to the
<a href="http://melisgl.github.io/mgl-pax-world/mgl-manual.html" >documentation</a>
instead.</p>

<p><em>2009-12-02</em> -- This is going to be the start of an introduction
series on the <a href="http://cliki.net/MGL" >MGL</a> Common Lisp machine
learning library. <code>MGL</code> focuses mainly on <a href="http://en.wikipedia.org/wiki/Boltzmann_machine" >Boltzmann
Machines</a> (BMs). In
fact, the few seemingly unrelated things it currently
offers (gradient descent, conjugate gradient, backprop) are directly
needed to implement the learning and fine tuning methods for
different kinds of BMs. But before venturing too far into specifics,
here is a quick glimpse at the bigger picture and the motivations.</p>

<p>... read the rest of <a href="introduction-to-mgl-part-1.html#x-28MGL-PAX-BLOG-3A-40INTRODUCTION-TO-MGL-PART-1-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">Introduction to MGL (part 1)</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40INTRODUCTION-TO-MGL-PART-1-SHORT-20MGL-PAX-3ASECTION-29" title="Introduction to MGL (part 1)">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GLOBAL-COMPILER-POLICY-SHORT-20MGL-PAX-3ASECTION-29" title="Global Compiler Policy">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-SHORT-20MGL-PAX-3ASECTION-29" title="Object Initialization with Slot Dependencies">&#8634;</a></span></span></p>

<h2><a href="object-initialization-with-slot-dependencies.html#x-28MGL-PAX-BLOG-3A-40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-20MGL-PAX-3ASECTION-29" title="Object Initialization with Slot Dependencies">Object Initialization with Slot Dependencies</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-07-04</em> -- Consider a class with a trivial initialization
dependency between slots <code>A</code> and <code>B</code>:))</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> super <span class="paren2">(<span class="code"></span>)</span>
 <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">a <span class="keyword">:initarg</span> <span class="keyword">:a</span> <span class="keyword">:reader</span> a</span>)</span>
  <span class="paren3">(<span class="code">b <span class="keyword">:initform</span> 0 <span class="keyword">:initarg</span> <span class="keyword">:b</span> <span class="keyword">:reader</span> b</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code"><i><span class="symbol">defmethod</span></i> initialize-instance <span class="keyword">:after</span> <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">super super</span>)</span> &amp;key &amp;allow-other-keys</span>)</span>
 <span class="paren2">(<span class="code">setf <span class="paren3">(<span class="code">slot-value super 'a</span>)</span> <span class="paren3">(<span class="code">1+ <span class="paren4">(<span class="code">slot-value super 'b</span>)</span></span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">a <span class="paren2">(<span class="code">make-instance 'super</span>)</span></span>)</span> =&gt; 1
<span class="paren1">(<span class="code">a <span class="paren2">(<span class="code">make-instance 'super <span class="keyword">:b</span> 1</span>)</span></span>)</span> =&gt; 2</span></code></pre>

<p>You may even subclass it, add an initform and it still works:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">defclass</span></i> sub <span class="paren2">(<span class="code">super</span>)</span>
 <span class="paren2">(<span class="code"><span class="paren3">(<span class="code">b <span class="keyword">:initform</span> 1</span>)</span></span>)</span></span>)</span>

<span class="paren1">(<span class="code">a <span class="paren2">(<span class="code">make-instance 'sub</span>)</span></span>)</span> =&gt; 2</span></code></pre>

<p>... read the rest of <a href="object-initialization-with-slot-dependencies.html#x-28MGL-PAX-BLOG-3A-40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-20MGL-PAX-3ASECTION-29" title="Object Initialization with Slot Dependencies">Object Initialization with Slot Dependencies</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GLOBAL-COMPILER-POLICY-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40OBJECT-INITIALIZATION-WITH-SLOT-DEPENDENCIES-SHORT-20MGL-PAX-3ASECTION-29" title="Object Initialization with Slot Dependencies">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ACTIVE-LEARNING-FOR-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Active Learning for cl-libsvm">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GLOBAL-COMPILER-POLICY-SHORT-20MGL-PAX-3ASECTION-29" title="Global Compiler Policy">&#8634;</a></span></span></p>

<h2><a href="global-compiler-policy.html#x-28MGL-PAX-BLOG-3A-40GLOBAL-COMPILER-POLICY-20MGL-PAX-3ASECTION-29" title="Global Compiler Policy">Global Compiler Policy</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-06-30</em> -- A quick note to library implementors: The effects
of <code>DECLAIM</code> are <a href="http://www.lispworks.com/documentation/HyperSpec/Body/m_declai.htm" >permitted to
persist</a>
after the containing file is compiled and it is unkind to mutate
your user's settings. Personally, I find <code>DECLAIM</code> too blunt and
prefer to add declarations within functions, even going as far as
introducing <code>LOCALLY</code> subforms just to have a place on which to hang
declarations. But if you are really set on using <code>DECLAIM</code>, please
wrap it like this:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">eval-when</span></i> <span class="paren2">(<span class="code"><span class="keyword">:compile-toplevel</span></span>)</span>
 <span class="paren2">(<span class="code">declaim <span class="paren3">(<span class="code">optimize speed</span>)</span></span>)</span></span>)</span></span></code></pre>

<p>to ensure that the body is evaluated in <a href="http://www.lispworks.com/documentation/HyperSpec/Body/03_bca.htm" >the dynamic execution
context of the
compiler</a>
which makes a practical difference on Allegro. It goes without
saying that you don't want <code>(PROCLAIM '(OPTIMIZE ...))</code> in a
library, either.</p>

<p><em>UPDATE</em>: The above works, but is not mandated by the spec because the
dynamic execution context of the compiler does not include the global
declarations. Alas, by the spec the portable solution is to wrap the
whole file in:</p>

<pre><code><span class="code"><span class="paren1">(<span class="code"><i><span class="symbol">locally</span></i> <span class="paren2">(<span class="code">declare <span class="paren3">(<span class="code">optimize speed</span>)</span></span>)</span> ...</span>)</span></span></code></pre>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ACTIVE-LEARNING-FOR-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40GLOBAL-COMPILER-POLICY-SHORT-20MGL-PAX-3ASECTION-29" title="Global Compiler Policy">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CALLING-CONVENTION-HACKS-SHORT-20MGL-PAX-3ASECTION-29" title="Calling Convention Hacks">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ACTIVE-LEARNING-FOR-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Active Learning for cl-libsvm">&#8634;</a></span></span></p>

<h2><a href="active-learning-for-cl-libsvm.html#x-28MGL-PAX-BLOG-3A-40ACTIVE-LEARNING-FOR-CL-LIBSVM-20MGL-PAX-3ASECTION-29" title="Active Learning for cl-libsvm">Active Learning for cl-libsvm</a></h2>

<p><em>Tags</em>: <a href="category-ai.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-AI-20MGL-PAX-3ASECTION-29" title="AI">AI</a>, <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-06-22</em> -- Along the lines of <a href="http://mlbiomedicine.blogspot.com/2009/03/python-libsvm-or-on-hacking-libsvm.html" >active learning with python &amp;
libsvm</a>,
I <a href="http://quotenil.com/git/?p=cl-libsvm.git;a=summary" >added</a>
support for calculating distance of a point from the separating
hyperplane to <a href="http://cliki.net/cl-libsvm" >cl-libsvm</a>. In binary
classification there is only one SVM involved and one hyperplane.
However, with N class problems there is a binary SVM for each of the
N*(N-1)/2 pairs of classes and there are as many separating
hyperplanes, something the linked python code fails to take into
account. As per the libsvm
<a href="http://www.csie.ntu.edu.tw/~cjlin/libsvm/faq.html#f4151" >FAQ</a>, the
absolute value of the decision value (see <code>PREDICT-VALUES</code>, wrapper
of svm_predict_values) divided by the norm of the normal vector of
the separating hyperplane is the distance. <code>PREDICT-VALUES</code> and
<code>MODEL-W2S</code> are sufficient to calculate it. Note that among the
distributed binaries only the linux-x86 version has been recompiled
with the necessary changes, but patched sources are also included
for your recompiling pleasure.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CALLING-CONVENTION-HACKS-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40ACTIVE-LEARNING-FOR-CL-LIBSVM-SHORT-20MGL-PAX-3ASECTION-29" title="Active Learning for cl-libsvm">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40X86OID-PSEUDO-ATOMIC-SHORT-20MGL-PAX-3ASECTION-29" title="X86oid Pseudo Atomic">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CALLING-CONVENTION-HACKS-SHORT-20MGL-PAX-3ASECTION-29" title="Calling Convention Hacks">&#8634;</a></span></span></p>

<h2><a href="calling-convention-hacks.html#x-28MGL-PAX-BLOG-3A-40CALLING-CONVENTION-HACKS-20MGL-PAX-3ASECTION-29" title="Calling Convention Hacks">Calling Convention Hacks</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-04-19</em> -- SBCL's <a href="http://www.sbcl.org/sbcl-internals/Calling-Convention.html" >calling
convention</a>
is rather peculiar. Frames are allocated and mostly set up by the
caller. The new frame starts with a pointer to the old frame, then
comes the return address, an empty slot and the stack arguments (the
first three are passed in registers on x86).</p>

<p>Software archeology aside, the only reason I can see for this scheme
is that stack arguments are easier to manipulate when they are after
the return address, old frame pointer part, in particular tail calls
with any number of arguments can be made without re<code>[</code>al<code>]</code>locating
the frame.</p>

<p>The first step towards callee allocated frames is swapping the
return address and old fp slots. Asking an innocent question on
<code>#lisp</code> accomplished most of the work as <a href="http://www.lisphacker.com/" >Alastair
Bridgewater</a> had a patch for x86 against
a 0.9ish version that does exactly this.</p>

<p>Forward porting it to current SBCL was a breeze. Relatively
speaking, of course, because debugging cold init failures is never
pleasant. He also had another patch that biases the frame pointer to
point to the old fp slot instead of just before the return address.
This has the benefit of making Lisp and foreign frame layouts the
same which makes backtraces more reliable and allows external
debugging tools recognize all frames.</p>

<p>Callee allocated frames are still quite some way off, but while in
the area I sought a bit of optimization fun. With the return address
before old fp it is now possible to return with the idiomatic <code>POP
EBP, RET</code> sequence. Well, most of the time: when more multiple
values are returned than there are argument passing registers they
are placed on the stack exactly where the arguments normally reside.
Obviously, in this case the frame cannot be dismantled.</p>

<p>... read the rest of <a href="calling-convention-hacks.html#x-28MGL-PAX-BLOG-3A-40CALLING-CONVENTION-HACKS-20MGL-PAX-3ASECTION-29" title="Calling Convention Hacks">Calling Convention Hacks</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40X86OID-PSEUDO-ATOMIC-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CALLING-CONVENTION-HACKS-SHORT-20MGL-PAX-3ASECTION-29" title="Calling Convention Hacks">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CODE-ALIGNMENT-ON-X86-SHORT-20MGL-PAX-3ASECTION-29" title="Code alignment on x86">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40X86OID-PSEUDO-ATOMIC-SHORT-20MGL-PAX-3ASECTION-29" title="X86oid Pseudo Atomic">&#8634;</a></span></span></p>

<h2><a href="x86oid-pseudo-atomic.html#x-28MGL-PAX-BLOG-3A-40X86OID-PSEUDO-ATOMIC-20MGL-PAX-3ASECTION-29" title="X86oid Pseudo Atomic">X86oid Pseudo Atomic</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-03-29</em> -- The relatively recent
<a href="http://www.method-combination.net/blog/archives/2008/02/01/vm-tricks.html" >chit</a>
- <a href="http://www.pvk.ca/Blog/LowLevel/VM_tricks_safepoints.html" >chat</a>
about allocation and interrupts have had me looking at ways to speed
up pseudo atomic in SBCL.</p>

<pre><code><span class="code"> <span class="paren1">(<span class="code"><i><span class="symbol">defmacro</span></i> pseudo-atomic <span class="paren2">(<span class="code">&amp;rest forms</span>)</span>
  <span class="paren2">(<span class="code"><i><span class="symbol">with-unique-names</span></i> <span class="paren3">(<span class="code">label</span>)</span>
    `<span class="paren3">(<span class="code"><i><span class="symbol">let</span></i> <span class="paren4">(<span class="code"><span class="paren5">(<span class="code">,label <span class="paren6">(<span class="code">gen-label</span>)</span></span>)</span></span>)</span>
       <span class="paren4">(<span class="code">inst or <span class="paren5">(<span class="code">make-ea <span class="keyword">:byte</span> <span class="keyword">:disp</span> <span class="paren6">(<span class="code">* 4 thread-pseudo-atomic-bits-slot</span>)</span></span>)</span>
             <span class="paren5">(<span class="code">fixnumize 1</span>)</span> <span class="keyword">:fs</span></span>)</span>
       ,@forms
       <span class="paren4">(<span class="code">inst xor <span class="paren5">(<span class="code">make-ea <span class="keyword">:byte</span> <span class="keyword">:disp</span> <span class="paren6">(<span class="code">* 4 thread-pseudo-atomic-bits-slot</span>)</span></span>)</span>
             <span class="paren5">(<span class="code">fixnumize 1</span>)</span> <span class="keyword">:fs</span></span>)</span>
       <span class="paren4">(<span class="code">inst jmp <span class="keyword">:z</span> ,label</span>)</span>
       <span class="comment">;; if PAI was set, interrupts were disabled at the same
</span>       <span class="comment">;; time using the process signal mask.
</span>       <span class="paren4">(<span class="code">inst break pending-interrupt-trap</span>)</span>
       <span class="paren4">(<span class="code">emit-label ,label</span>)</span></span>)</span></span>)</span></span>)</span></span></code></pre>

<p>... read the rest of <a href="x86oid-pseudo-atomic.html#x-28MGL-PAX-BLOG-3A-40X86OID-PSEUDO-ATOMIC-20MGL-PAX-3ASECTION-29" title="X86oid Pseudo Atomic">X86oid Pseudo Atomic</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CODE-ALIGNMENT-ON-X86-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40X86OID-PSEUDO-ATOMIC-SHORT-20MGL-PAX-3ASECTION-29" title="X86oid Pseudo Atomic">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40SPACE-CADET-SHORT-20MGL-PAX-3ASECTION-29" title="Space Cadet">&#8594;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CODE-ALIGNMENT-ON-X86-SHORT-20MGL-PAX-3ASECTION-29" title="Code alignment on x86">&#8634;</a></span></span></p>

<h2><a href="code-alignment-on-x86.html#x-28MGL-PAX-BLOG-3A-40CODE-ALIGNMENT-ON-X86-20MGL-PAX-3ASECTION-29" title="Code alignment on x86">Code alignment on x86</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2009-03-09</em> -- There has always been a lot of wiggling of SBCL
<a href="https://web.archive.org/web/20080513083106/http://sbcl.boinkor.net/bench/" >boinkmarks</a> results. It's easy to
chalk this up to system load, but the same can be observed running
the <a href="http://common-lisp.net/project/cl-bench/" >cl-bench</a> benchmarks
under more ideal circumstances. Part of the reason is the
insufficient number of iterations of some tests: measurement
accuracy is really bad when the run time is below 0.2s and it is
abysmal when there is other activity on the system which is easy to
tell even in retrospect by comparing the real and user time columns.</p>

<p>But that's not the end of the story, take for instance
<code>FPRINT/PRETTY</code>: it takes more than two seconds but often
experiences changes up to 7% caused by seemingly unrelated changes.
People have fingered alignment as a likely cause.</p>

<p>Recently this issue has become more pressing as I've been trying to
reduce the overhead of x86's pseudo atomic. Unfortunately, the
effect is smallish which makes measurement difficult so I tried
aligning loops on 16 byte boundaries. This being on x86, that meant
aligning code similarly first (it's 8 byte aligned currently).</p>

<p>The <a href="http://quotenil.com/git/?p=sbcl.git;a=commit;h=2148639257c45f43c99f8c24087f17c9d8d03abb" >change
itself</a> (from
the allocate-code-object branch of my git tree) is rather trivial,
the effects are not. It turns out that depending on the
<a href="http://www.agner.org/optimize/microarchitecture.pdf" >microarchitecture</a>
some x86 CPUs like alignment, while the rest should really not care
much. In practice, other factors come into play at which
<a href="http://article.gmane.org/gmane.lisp.steel-bank.devel/12898" >we</a> can
only
<a href="http://groups.google.com/group/comp.lang.asm.x86/browse_thread/thread/bffd4ad26b9a9b10#" >guess</a>.
It certainly seems that the Core Duo (and likely the Pentium M) is
so deeply unnerved by a jump instruction near the end of a 16 byte
block that it cannot execute the loop at its normal speed.</p>

<p>... read the rest of <a href="code-alignment-on-x86.html#x-28MGL-PAX-BLOG-3A-40CODE-ALIGNMENT-ON-X86-20MGL-PAX-3ASECTION-29" title="Code alignment on x86">Code alignment on x86</a>.</p>

<p><a id='x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40SPACE-CADET-SHORT-20MGL-PAX-3ASECTION-29'></a></p>

<p><span class="outer-navigation"><span class="navigation"> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40CODE-ALIGNMENT-ON-X86-SHORT-20MGL-PAX-3ASECTION-29" title="Code alignment on x86">&#8592;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">&#8593;</a> <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP--40SPACE-CADET-SHORT-20MGL-PAX-3ASECTION-29" title="Space Cadet">&#8634;</a></span></span></p>

<h2><a href="space-cadet.html#x-28MGL-PAX-BLOG-3A-40SPACE-CADET-20MGL-PAX-3ASECTION-29" title="Space Cadet">Space Cadet</a></h2>

<p><em>Tags</em>: <a href="#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-LISP-20MGL-PAX-3ASECTION-29" title="Lisp">Lisp</a>, <a href="category-tech.html#x-28MGL-PAX-BLOG-3A-3A-40CATEGORY-TECH-20MGL-PAX-3ASECTION-29" title="Tech">Tech</a>, <a href="blog.html#x-28MGL-PAX-BLOG-3A-3A-40BLOG-20MGL-PAX-3ASECTION-29" title="Blog">Blog</a></p>

<p><em>2008-12-15</em> -- Emacs users often report problems caused by strain
on the pinky finger that's used to press the <em>Control</em> key. The
standard answer to that is to map <em>Caps Lock</em> to <em>Control</em>. I
believe that there is a better way:</p>

<p><img src="file:blog-files/symbolics-keyboard.jpg" alt="" /></p>

<p>Note the placement of modifiers: <em>Control</em>, <em>Meta</em>, <em>Super</em>, <em>Hyper</em>
on both sides of Space in this order, with <em>Control</em> being the
closest to it. Touch typers especially find having two of each key
absolutely essential and the symmetric placement appeals to me.</p>

<p>... read the rest of <a href="space-cadet.html#x-28MGL-PAX-BLOG-3A-40SPACE-CADET-20MGL-PAX-3ASECTION-29" title="Space Cadet">Space Cadet</a>.</p>
  </div>
</div>
<script>$('#page-toc').toc({'selectors': 'h1'});</script>
</body>
</html>
